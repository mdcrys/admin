"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[511],{2511:(z,Z,d)=>{d.r(Z),d.d(Z,{UsersModule:()=>O});var c=d(6814),h=d(7304),e=d(5879);let b=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=e.Xpm({type:r,selectors:[["app-users"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},dependencies:[h.lC]})}return r})();var u=d(1274),p=d(9862),U=d(5619),g=d(4716),m=d(6988),T=d(3595);let _=(()=>{class r{http;authservice;isLoading$;isLoadingSubject;constructor(t,o){this.http=t,this.authservice=o,this.isLoadingSubject=new U.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}registerUser(t){this.isLoadingSubject.next(!0);let o=new p.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(m.$g+"/users",t,{headers:o}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}listUsers(t=1,o=""){this.isLoadingSubject.next(!0);let n=new p.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(m.$g+"/users?page="+t+"&search="+o,{headers:n}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}configAll(){this.isLoadingSubject.next(!0);let t=new p.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(m.$g+"/users/config",{headers:t}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}updateUser(t,o){this.isLoadingSubject.next(!0);let n=new p.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(m.$g+"/users/"+t,o,{headers:n}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}deleteUser(t){this.isLoadingSubject.next(!0);let o=new p.WM({Authorization:"Bearer "+this.authservice.token});return this.http.delete(m.$g+"/users/"+t,{headers:o}).pipe((0,g.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(o){return new(o||r)(e.LFG(p.eN),e.LFG(T.e8))};static \u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var f=d(2425),a=d(6223);function C(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"option",45),e._uU(2),e.qZA(),e.BQk()),2&r){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function v(r,l){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",46),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imagen_previzualiza,e.LSH)}}function E(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",47)(2,"input",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.sucursale_id=s.id)}),e.qZA(),e.TgZ(3,"label",49),e._uU(4),e.qZA()(),e.BQk()}if(2&r){const t=l.$implicit;e.xp6(4),e.hij(" ",t.name," ")}}function A(r,l){1&r&&e._UZ(0,"span",50)}let k=(()=>{class r{modal;usersService;toast;UserC=new e.vpe;roles=[];sucursales=[];isLoading;name="";surname="";email="";phone="";role_id="";gender="";type_document="DNI";n_document="";address="";sucursale_id="";file_name;imagen_previzualiza;password="";password_repit="";constructor(t,o,n){this.modal=t,this.usersService=o,this.toast=n}ngOnInit(){}processFile(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toast.warning("WARN","El archivo no es una imagen");this.file_name=t.target.files[0];let o=new FileReader;o.readAsDataURL(this.file_name),o.onloadend=()=>this.imagen_previzualiza=o.result}store(){if(!this.name)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.type_document||!this.n_document)return this.toast.error("Validaci\xf3n","Es requerido el tipo de documento , junto con el numero del documento"),!1;if(!this.phone)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.gender)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.role_id)return this.toast.error("Validaci\xf3n","El rol es requerido"),!1;if(!this.sucursale_id)return this.toast.error("Validaci\xf3n","La sucursal es requerida"),!1;if(!this.password)return this.toast.error("Validaci\xf3n","La contrase\xf1a es requerido"),!1;if(this.password&&this.password!=this.password_repit)return this.toast.error("Validaci\xf3n","La contrase\xf1a no son iguales"),!1;let t=new FormData;t.append("name",this.name),t.append("surname",this.surname),t.append("email",this.email),t.append("phone",this.phone),t.append("role_id",this.role_id),t.append("gender",this.gender),t.append("type_document",this.type_document),t.append("n_document",this.n_document),this.address&&t.append("address",this.address),t.append("sucursale_id",this.sucursale_id),t.append("password",this.password),t.append("imagen",this.file_name),this.usersService.registerUser(t).subscribe(o=>{console.log(o),403==o.message?this.toast.error("Validaci\xf3n",o.message_text):(this.toast.success("Exito","El usuario se ha registro correctamente"),this.UserC.emit(o.user),this.modal.close())})}static \u0275fac=function(o){return new(o||r)(e.Y36(u.Kz),e.Y36(_),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-create-user"]],inputs:{roles:"roles",sucursales:"sucursales"},outputs:{UserC:"UserC"},decls:103,vars:16,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","my-3"],["id","kt_modal_add_user_form","action","#",1,"form"],["id","kt_modal_add_user_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_user_header","data-kt-scroll-wrappers","#kt_modal_add_user_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7"],[1,"fv-row","row","my-1"],[1,"col-6"],[1,"required","fw-bold","fs-6","mb-2"],["type","text","name","name","placeholder","Name",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","text","name","surname","placeholder","Surname",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","email","name","email","placeholder","example@gmail.com",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","phone","placeholder","99999999",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"col-12"],["name","role_selected","placeholder","Selec. Rol",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","gender","id","gender1",1,"form-check-input",3,"click"],["for","gender1",1,"form-check-label"],["type","radio","name","gender","id","gender2",1,"form-check-input",3,"click"],["for","gender2",1,"form-check-label"],["name","categorie","placeholder","Selec. Tipo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","DNI"],["value","CARNET DE EXTRANJERIA"],["value","PASAPORTE"],["type","number","name","n_document","placeholder","99999999",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["name","address","id","","cols","20","rows","5",3,"ngModel","ngModelChange"],[1,"custom-file"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[4,"ngIf"],[1,"d-flex"],["type","password","name","password","placeholder","*******",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","********",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[3,"value"],["alt","","srcset","",2,"height","100px",3,"src"],[1,"form-check","mx-1"],["type","radio","name","sucursale","id","sucursale1",1,"form-check-input",3,"click"],["for","sucursale1",1,"form-check-label"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Add User"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),e._uU(15,"Nombre: "),e.qZA(),e.TgZ(16,"input",14),e.NdJ("ngModelChange",function(i){return n.name=i}),e.qZA()(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19,"Apellido: "),e.qZA(),e.TgZ(20,"input",15),e.NdJ("ngModelChange",function(i){return n.surname=i}),e.qZA()()(),e.TgZ(21,"div",11)(22,"div",12)(23,"label",13),e._uU(24,"Email: "),e.qZA(),e.TgZ(25,"input",16),e.NdJ("ngModelChange",function(i){return n.email=i}),e.qZA()(),e.TgZ(26,"div",12)(27,"label",13),e._uU(28,"Phone: "),e.qZA(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(i){return n.phone=i}),e.qZA()()(),e.TgZ(30,"div",11)(31,"div",18)(32,"label",13),e._uU(33,"Roles: "),e.qZA(),e.TgZ(34,"select",19),e.NdJ("ngModelChange",function(i){return n.role_id=i}),e.TgZ(35,"option",20),e._uU(36,"Selec. Rol"),e.qZA(),e.YNc(37,C,3,2,"ng-container",21),e.qZA()()(),e.TgZ(38,"div",11)(39,"div",12)(40,"label",13),e._uU(41,"Genero: "),e.qZA(),e.TgZ(42,"div")(43,"div",22)(44,"input",23),e.NdJ("click",function(){return n.gender="MASCULINO"}),e.qZA(),e.TgZ(45,"label",24),e._uU(46," Masculino "),e.qZA()(),e.TgZ(47,"div",22)(48,"input",25),e.NdJ("click",function(){return n.gender="FEMENINO"}),e.qZA(),e.TgZ(49,"label",26),e._uU(50," Femenino "),e.qZA()()()(),e._UZ(51,"div",12),e.qZA(),e.TgZ(52,"div",11)(53,"div",12)(54,"label",13),e._uU(55,"Tipo de documento: "),e.qZA(),e.TgZ(56,"select",27),e.NdJ("ngModelChange",function(i){return n.type_document=i}),e.TgZ(57,"option",28),e._uU(58,"DNI"),e.qZA(),e.TgZ(59,"option",29),e._uU(60,"CARNET DE EXTRANJERIA"),e.qZA(),e.TgZ(61,"option",30),e._uU(62,"PASAPORTE"),e.qZA()()(),e.TgZ(63,"div",12)(64,"label",13),e._uU(65,"N\xb0 de documento: "),e.qZA(),e.TgZ(66,"input",31),e.NdJ("ngModelChange",function(i){return n.n_document=i}),e.qZA()()(),e.TgZ(67,"div",11)(68,"div",12)(69,"label",13),e._uU(70,"Direcci\xf3n: "),e.qZA(),e.TgZ(71,"textarea",32),e.NdJ("ngModelChange",function(i){return n.address=i}),e.qZA()(),e.TgZ(72,"div",12)(73,"label",13),e._uU(74,"Avatar: "),e.qZA(),e.TgZ(75,"div",33)(76,"input",34),e.NdJ("change",function(i){return n.processFile(i)}),e.qZA(),e.TgZ(77,"label",35),e._uU(78,"Choose file"),e.qZA()(),e.YNc(79,v,2,1,"div",36),e.qZA()(),e.TgZ(80,"div",11)(81,"div",18)(82,"label",13),e._uU(83,"Sucursales: "),e.qZA(),e.TgZ(84,"div",37),e.YNc(85,E,5,1,"ng-container",21),e.qZA()()(),e.TgZ(86,"div",11)(87,"div",12)(88,"label",13),e._uU(89,"Contrase\xf1a: "),e.qZA(),e.TgZ(90,"input",38),e.NdJ("ngModelChange",function(i){return n.password=i}),e.qZA()(),e.TgZ(91,"div",12)(92,"label",13),e._uU(93,"Repetir Contrase\xf1a: "),e.qZA(),e.TgZ(94,"input",39),e.NdJ("ngModelChange",function(i){return n.password_repit=i}),e.qZA()()()(),e.TgZ(95,"div",40)(96,"button",41),e.NdJ("click",function(){return n.modal.dismiss()}),e._uU(97,"Cerrar"),e.qZA(),e.TgZ(98,"button",42),e.NdJ("click",function(){return n.store()}),e.TgZ(99,"span",43),e._uU(100,"Registrar"),e.qZA(),e.YNc(101,A,1,0,"span",44),e.ALo(102,"async"),e.qZA()()()()()),2&o&&(e.xp6(16),e.Q6J("ngModel",n.name),e.xp6(4),e.Q6J("ngModel",n.surname),e.xp6(5),e.Q6J("ngModel",n.email),e.xp6(4),e.Q6J("ngModel",n.phone),e.xp6(5),e.Q6J("ngModel",n.role_id),e.xp6(3),e.Q6J("ngForOf",n.roles),e.xp6(19),e.Q6J("ngModel",n.type_document),e.xp6(10),e.Q6J("ngModel",n.n_document),e.xp6(5),e.Q6J("ngModel",n.address),e.xp6(8),e.Q6J("ngIf",n.imagen_previzualiza),e.xp6(6),e.Q6J("ngForOf",n.sucursales),e.xp6(5),e.Q6J("ngModel",n.password),e.xp6(4),e.Q6J("ngModel",n.password_repit),e.xp6(7),e.Q6J("ngIf",e.lcZ(102,14,n.isLoading)))},dependencies:[c.sg,c.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.On,a.F,c.Ov]})}return r})();function q(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"option",45),e._uU(2),e.qZA(),e.BQk()),2&r){const t=l.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function S(r,l){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",46),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imagen_previzualiza,e.LSH)}}function M(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",47)(2,"input",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit,i=e.oxw();return e.KtG(i.sucursale_id=s.id)}),e.qZA(),e.TgZ(3,"label",49),e._uU(4),e.qZA()(),e.BQk()}if(2&r){const t=l.$implicit,o=e.oxw();e.xp6(2),e.Q6J("checked",o.sucursale_id==t.id),e.xp6(2),e.hij(" ",t.name," ")}}function y(r,l){1&r&&e._UZ(0,"span",50)}let x=(()=>{class r{modal;usersService;toast;UserE=new e.vpe;roles=[];USER_SELECTED;sucursales=[];isLoading;name="";surname="";email="";phone="";role_id="";gender="";type_document="DNI";n_document="";address="";file_name;imagen_previzualiza;password="";password_repit="";sucursale_id="";constructor(t,o,n){this.modal=t,this.usersService=o,this.toast=n}ngOnInit(){this.name=this.USER_SELECTED.name,this.surname=this.USER_SELECTED.surname,this.email=this.USER_SELECTED.email,this.phone=this.USER_SELECTED.phone,this.role_id=this.USER_SELECTED.role_id,this.gender=this.USER_SELECTED.gender,this.type_document=this.USER_SELECTED.type_document,this.n_document=this.USER_SELECTED.n_document,this.address=this.USER_SELECTED.address,this.imagen_previzualiza=this.USER_SELECTED.avatar,this.sucursale_id=this.USER_SELECTED.sucursale_id}processFile(t){if(t.target.files[0].type.indexOf("image")<0)return void this.toast.warning("WARN","El archivo no es una imagen");this.file_name=t.target.files[0];let o=new FileReader;o.readAsDataURL(this.file_name),o.onloadend=()=>this.imagen_previzualiza=o.result}store(){if(!this.name)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.type_document||!this.n_document)return this.toast.error("Validaci\xf3n","Es requerido el tipo de documento , junto con el numero del documento"),!1;if(!this.phone)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.gender)return this.toast.error("Validaci\xf3n","El nombre es requerido"),!1;if(!this.role_id)return this.toast.error("Validaci\xf3n","El rol es requerido"),!1;if(this.password&&this.password!=this.password_repit)return this.toast.error("Validaci\xf3n","La contrase\xf1a no son iguales"),!1;let t=new FormData;t.append("name",this.name),t.append("surname",this.surname),t.append("email",this.email),t.append("phone",this.phone),t.append("role_id",this.role_id),t.append("gender",this.gender),t.append("type_document",this.type_document),t.append("n_document",this.n_document),this.address&&t.append("address",this.address),this.password&&t.append("password",this.password),this.file_name&&t.append("imagen",this.file_name),t.append("sucursale_id",this.sucursale_id),this.usersService.updateUser(this.USER_SELECTED.id,t).subscribe(o=>{console.log(o),403==o.message?this.toast.error("Validaci\xf3n",o.message_text):(this.toast.success("Exito","El usuario se ha editado correctamente"),this.UserE.emit(o.user),this.modal.close())})}static \u0275fac=function(o){return new(o||r)(e.Y36(u.Kz),e.Y36(_),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-edit-user"]],inputs:{roles:"roles",USER_SELECTED:"USER_SELECTED",sucursales:"sucursales"},outputs:{UserE:"UserE"},decls:103,vars:19,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","my-3"],["id","kt_modal_add_user_form","action","#",1,"form"],["id","kt_modal_add_user_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_user_header","data-kt-scroll-wrappers","#kt_modal_add_user_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7"],[1,"fv-row","row","my-1"],[1,"col-6"],[1,"required","fw-bold","fs-6","mb-2"],["type","text","name","name","placeholder","Name",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","text","name","surname","placeholder","Surname",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","email","name","email","placeholder","example@gmail.com",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","phone","placeholder","99999999",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"col-12"],["name","role_selected","placeholder","Selec. Rol",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","gender","id","gender1",1,"form-check-input",3,"checked","click"],["for","gender1",1,"form-check-label"],["type","radio","name","gender","id","gender2",1,"form-check-input",3,"checked","click"],["for","gender2",1,"form-check-label"],["name","categorie","placeholder","Selec. Tipo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","DNI"],["value","CARNET DE EXTRANJERIA"],["value","PASAPORTE"],["type","number","name","n_document","placeholder","99999999",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["name","address","id","","cols","20","rows","5",3,"ngModel","ngModelChange"],[1,"custom-file"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[4,"ngIf"],[1,"d-flex"],["type","password","name","password","placeholder","*******",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","********",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[3,"value"],["alt","","srcset","",2,"height","100px",3,"src"],[1,"form-check","mx-1"],["type","radio","name","sucursale","id","sucursale1",1,"form-check-input",3,"checked","click"],["for","sucursale1",1,"form-check-label"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),e._uU(15,"Nombre: "),e.qZA(),e.TgZ(16,"input",14),e.NdJ("ngModelChange",function(i){return n.name=i}),e.qZA()(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19,"Apellido: "),e.qZA(),e.TgZ(20,"input",15),e.NdJ("ngModelChange",function(i){return n.surname=i}),e.qZA()()(),e.TgZ(21,"div",11)(22,"div",12)(23,"label",13),e._uU(24,"Email: "),e.qZA(),e.TgZ(25,"input",16),e.NdJ("ngModelChange",function(i){return n.email=i}),e.qZA()(),e.TgZ(26,"div",12)(27,"label",13),e._uU(28,"Phone: "),e.qZA(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(i){return n.phone=i}),e.qZA()()(),e.TgZ(30,"div",11)(31,"div",18)(32,"label",13),e._uU(33,"Roles: "),e.qZA(),e.TgZ(34,"select",19),e.NdJ("ngModelChange",function(i){return n.role_id=i}),e.TgZ(35,"option",20),e._uU(36,"Selec. Rol"),e.qZA(),e.YNc(37,q,3,2,"ng-container",21),e.qZA()()(),e.TgZ(38,"div",11)(39,"div",12)(40,"label",13),e._uU(41,"Genero: "),e.qZA(),e.TgZ(42,"div")(43,"div",22)(44,"input",23),e.NdJ("click",function(){return n.gender="MASCULINO"}),e.qZA(),e.TgZ(45,"label",24),e._uU(46," Masculino "),e.qZA()(),e.TgZ(47,"div",22)(48,"input",25),e.NdJ("click",function(){return n.gender="FEMENINO"}),e.qZA(),e.TgZ(49,"label",26),e._uU(50," Femenino "),e.qZA()()()(),e._UZ(51,"div",12),e.qZA(),e.TgZ(52,"div",11)(53,"div",12)(54,"label",13),e._uU(55,"Tipo de documento: "),e.qZA(),e.TgZ(56,"select",27),e.NdJ("ngModelChange",function(i){return n.type_document=i}),e.TgZ(57,"option",28),e._uU(58,"DNI"),e.qZA(),e.TgZ(59,"option",29),e._uU(60,"CARNET DE EXTRANJERIA"),e.qZA(),e.TgZ(61,"option",30),e._uU(62,"PASAPORTE"),e.qZA()()(),e.TgZ(63,"div",12)(64,"label",13),e._uU(65,"N\xb0 de documento: "),e.qZA(),e.TgZ(66,"input",31),e.NdJ("ngModelChange",function(i){return n.n_document=i}),e.qZA()()(),e.TgZ(67,"div",11)(68,"div",12)(69,"label",13),e._uU(70,"Direcci\xf3n: "),e.qZA(),e.TgZ(71,"textarea",32),e.NdJ("ngModelChange",function(i){return n.address=i}),e.qZA()(),e.TgZ(72,"div",12)(73,"label",13),e._uU(74,"Avatar: "),e.qZA(),e.TgZ(75,"div",33)(76,"input",34),e.NdJ("change",function(i){return n.processFile(i)}),e.qZA(),e.TgZ(77,"label",35),e._uU(78,"Choose file"),e.qZA()(),e.YNc(79,S,2,1,"div",36),e.qZA()(),e.TgZ(80,"div",11)(81,"div",18)(82,"label",13),e._uU(83,"Sucursales: "),e.qZA(),e.TgZ(84,"div",37),e.YNc(85,M,5,2,"ng-container",21),e.qZA()()(),e.TgZ(86,"div",11)(87,"div",12)(88,"label",13),e._uU(89,"Contrase\xf1a: "),e.qZA(),e.TgZ(90,"input",38),e.NdJ("ngModelChange",function(i){return n.password=i}),e.qZA()(),e.TgZ(91,"div",12)(92,"label",13),e._uU(93,"Repetir Contrase\xf1a: "),e.qZA(),e.TgZ(94,"input",39),e.NdJ("ngModelChange",function(i){return n.password_repit=i}),e.qZA()()()(),e.TgZ(95,"div",40)(96,"button",41),e.NdJ("click",function(){return n.modal.dismiss()}),e._uU(97,"Cerrar"),e.qZA(),e.TgZ(98,"button",42),e.NdJ("click",function(){return n.store()}),e.TgZ(99,"span",43),e._uU(100,"Editar"),e.qZA(),e.YNc(101,y,1,0,"span",44),e.ALo(102,"async"),e.qZA()()()()()),2&o&&(e.xp6(3),e.hij("Edit User: ",n.USER_SELECTED.full_name,""),e.xp6(13),e.Q6J("ngModel",n.name),e.xp6(4),e.Q6J("ngModel",n.surname),e.xp6(5),e.Q6J("ngModel",n.email),e.xp6(4),e.Q6J("ngModel",n.phone),e.xp6(5),e.Q6J("ngModel",n.role_id),e.xp6(3),e.Q6J("ngForOf",n.roles),e.xp6(7),e.Q6J("checked","MASCULINO"==n.gender),e.xp6(4),e.Q6J("checked","FEMENINO"==n.gender),e.xp6(8),e.Q6J("ngModel",n.type_document),e.xp6(10),e.Q6J("ngModel",n.n_document),e.xp6(5),e.Q6J("ngModel",n.address),e.xp6(8),e.Q6J("ngIf",n.imagen_previzualiza),e.xp6(6),e.Q6J("ngForOf",n.sucursales),e.xp6(5),e.Q6J("ngModel",n.password),e.xp6(4),e.Q6J("ngModel",n.password_repit),e.xp6(7),e.Q6J("ngIf",e.lcZ(102,17,n.isLoading)))},dependencies:[c.sg,c.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.On,a.F,c.Ov]})}return r})();function w(r,l){1&r&&e._UZ(0,"span",15)}let J=(()=>{class r{modal;rolesService;toast;UserD=new e.vpe;USER_SELECTED;name="";isLoading;constructor(t,o,n){this.modal=t,this.rolesService=o,this.toast=n}ngOnInit(){}delete(){this.rolesService.deleteUser(this.USER_SELECTED.id).subscribe(t=>{console.log(t),403==t.message?this.toast.error("Validaci\xf3n",t.message_text):(this.toast.success("Exito","El usuario se elimino correctamente"),this.UserD.emit(t.role),this.modal.close())})}static \u0275fac=function(o){return new(o||r)(e.Y36(u.Kz),e.Y36(_),e.Y36(f._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-delete-user"]],inputs:{USER_SELECTED:"USER_SELECTED"},outputs:{UserD:"UserD"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return n.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12," \xbfESTAS SEGURO DE ELIMINAR ESTE USUARIO? "),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return n.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return n.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,w,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&o&&(e.xp6(3),e.hij("Delete User: #",n.USER_SELECTED.full_name,""),e.xp6(16),e.Q6J("ngIf",e.lcZ(20,2,n.isLoading)))},dependencies:[c.O5,a._Y,a.JL,a.F,c.Ov]})}return r})();function N(r,l){1&r&&e._UZ(0,"span",30)}function L(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editUser(n))}),e.TgZ(1,"i",41),e._UZ(2,"span",5)(3,"span",6),e.qZA()()}}function R(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"a",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteUser(n))}),e.TgZ(1,"i",43),e._UZ(2,"span",5)(3,"span",6)(4,"span",44)(5,"span",45)(6,"span",46),e.qZA()()}}function F(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"tr")(2,"td")(3,"div",31)(4,"div",32),e._UZ(5,"img",33),e.qZA(),e.TgZ(6,"div",34)(7,"a",35),e._uU(8),e.qZA(),e.TgZ(9,"span",36),e._uU(10),e.qZA()()()(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td",37),e.YNc(22,L,4,0,"a",38),e.YNc(23,R,7,0,"a",39),e.qZA()(),e.BQk()),2&r){const t=l.$implicit,o=e.oxw();e.xp6(5),e.Q6J("src",t.avatar,e.LSH),e.xp6(3),e.Oqu(t.full_name),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.hij(" ",t.role.name," "),e.xp6(2),e.hij(" ",t.sucursale.name," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(2),e.hij(" ",t.n_document," "),e.xp6(2),e.hij(" ",t.created_format_at," "),e.xp6(2),e.Q6J("ngIf",o.isPermission("edit_user")),e.xp6(1),e.Q6J("ngIf",o.isPermission("delete_user"))}}const D=[{path:"",component:b,children:[{path:"list",component:(()=>{class r{modalService;usersService;search="";USERS=[];isLoading$;roles=[];sucursales=[];totalPages=0;currentPage=1;constructor(t,o){this.modalService=t,this.usersService=o}ngOnInit(){this.isLoading$=this.usersService.isLoading$,this.listUsers(),this.configAll()}listUsers(t=1){this.usersService.listUsers(t,this.search).subscribe(o=>{console.log(o),this.USERS=o.users,this.totalPages=o.total,this.currentPage=t})}configAll(){this.usersService.configAll().subscribe(t=>{console.log(t),this.roles=t.roles,this.sucursales=t.sucursales})}loadPage(t){this.listUsers(t)}createUser(){const t=this.modalService.open(k,{centered:!0,size:"md"});t.componentInstance.roles=this.roles,t.componentInstance.sucursales=this.sucursales,t.componentInstance.UserC.subscribe(o=>{this.USERS.unshift(o)})}editUser(t){const o=this.modalService.open(x,{centered:!0,size:"md"});o.componentInstance.USER_SELECTED=t,o.componentInstance.roles=this.roles,o.componentInstance.sucursales=this.sucursales,o.componentInstance.UserE.subscribe(n=>{let s=this.USERS.findIndex(i=>i.id==t.id);-1!=s&&(this.USERS[s]=n)})}deleteUser(t){const o=this.modalService.open(J,{centered:!0,size:"md"});o.componentInstance.USER_SELECTED=t,o.componentInstance.UserD.subscribe(n=>{let s=this.USERS.findIndex(i=>i.id==t.id);-1!=s&&this.USERS.splice(s,1)})}isPermission(t){return(0,m.me)(t)}static \u0275fac=function(o){return new(o||r)(e.Y36(u.FF),e.Y36(_))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-list-users"]],decls:58,vars:10,consts:[[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search Users",1,"form-control","form-control-solid","w-250px","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-toolbar"],["data-kt-customer-table-toolbar","base",1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"click"],["data-kt-customer-table-toolbar","selected",1,"d-flex","justify-content-end","align-items-center","d-none"],[1,"fw-bold","me-5"],["data-kt-customer-table-select","selected_count",1,"me-2"],["type","button","data-kt-customer-table-select","delete_selected",1,"btn","btn-danger"],[1,"card-body","pt-0"],["id","kt_customers_table_wrapper",1,"dt-container","dt-bootstrap5","dt-empty-footer"],["id","",1,"table-responsive"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable",2,"width","1199.5px"],["role","row",1,"text-start","text-gray-500","fw-bold","fs-7","text-uppercase","gs-0"],["data-dt-column","1","rowspan","1","colspan","1","aria-label","Customer Name: Activate to sort","tabindex","0",1,"min-w-125px","dt-orderable-asc","dt-orderable-desc"],["role","button",1,"dt-column-title"],[1,"dt-column-order"],["data-dt-column","5","rowspan","1","colspan","1","aria-label","Created Date: Activate to sort","tabindex","0",1,"min-w-125px","dt-orderable-asc","dt-orderable-desc"],["data-dt-column","6","rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-70px","dt-orderable-none"],[1,"dt-column-title"],[1,"fw-semibold","text-gray-600"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"],[1,"d-flex","justify-content-start","flex-column"],["href","#",1,"text-gray-900","fw-bold","text-hover-primary","mb-1","fs-6"],[1,"text-muted","fw-semibold","text-muted","d-block","fs-7"],[1,""],["href","#","onclick","return false;","class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",3,"click",4,"ngIf"],["href","#","onclick","return false;","class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm",3,"click",4,"ngIf"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._UZ(5,"span",5)(6,"span",6),e.qZA(),e.TgZ(7,"input",7),e.NdJ("ngModelChange",function(i){return n.search=i})("keyup.enter",function(){return n.listUsers()}),e.qZA()()(),e.YNc(8,N,1,0,"span",8),e.ALo(9,"async"),e.TgZ(10,"div",9)(11,"div",10)(12,"button",11),e.NdJ("click",function(){return n.createUser()}),e._uU(13," + Add User "),e.qZA()(),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"span",14),e._uU(17," Selected "),e.qZA(),e.TgZ(18,"button",15),e._uU(19," Delete Selected "),e.qZA()()()(),e.TgZ(20,"div",16)(21,"div",17)(22,"div",18)(23,"table",19)(24,"thead")(25,"tr",20)(26,"th",21)(27,"span",22),e._uU(28,"Usuario"),e.qZA(),e._UZ(29,"span",23),e.qZA(),e.TgZ(30,"th",21)(31,"span",22),e._uU(32,"Rol"),e.qZA(),e._UZ(33,"span",23),e.qZA(),e.TgZ(34,"th",21)(35,"span",22),e._uU(36,"Sucursal"),e.qZA(),e._UZ(37,"span",23),e.qZA(),e.TgZ(38,"th",21)(39,"span",22),e._uU(40,"Telefono"),e.qZA(),e._UZ(41,"span",23),e.qZA(),e.TgZ(42,"th",21)(43,"span",22),e._uU(44,"N\xb0 de documento"),e.qZA(),e._UZ(45,"span",23),e.qZA(),e.TgZ(46,"th",24)(47,"span",22),e._uU(48,"Fecha de registro"),e.qZA(),e._UZ(49,"span",23),e.qZA(),e.TgZ(50,"th",25)(51,"span",26),e._uU(52,"Actions"),e.qZA(),e._UZ(53,"span",23),e.qZA()()(),e.TgZ(54,"tbody",27),e.YNc(55,F,24,10,"ng-container",28),e.qZA(),e._UZ(56,"tfoot"),e.qZA()(),e.TgZ(57,"ngb-pagination",29),e.NdJ("pageChange",function(i){return n.currentPage=i})("pageChange",function(i){return n.loadPage(i)}),e.qZA()()()()),2&o&&(e.xp6(7),e.Q6J("ngModel",n.search),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,8,n.isLoading$)),e.xp6(47),e.Q6J("ngForOf",n.USERS),e.xp6(2),e.Q6J("collectionSize",n.totalPages)("page",n.currentPage)("pageSize",25)("rotate",!0)("boundaryLinks",!0))},dependencies:[c.sg,c.O5,a.Fj,a.JJ,a.On,u.N9,c.Ov]})}return r})()}]}];let I=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[h.Bz.forChild(D),h.Bz]})}return r})();var Q=d(53);let O=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[c.ez,I,p.JF,a.u5,u.IJ,a.UX,Q.vi,u.bz,u.jF]})}return r})()}}]);
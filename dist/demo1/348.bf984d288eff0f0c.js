"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[348],{6348:(pe,Z,d)=>{d.r(Z),d.d(Z,{PurchaseModule:()=>de});var l=d(6814),f=d(7304),e=d(5879);let A=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=e.Xpm({type:o,selectors:[["app-purchase"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[f.lC]})}return o})();var T=d(9756),_=d(1274),b=d(2425),u=d(9862),v=d(5619),p=d(4716),h=d(6988),P=d(3595);let m=(()=>{class o{http;authservice;isLoading$;isLoadingSubject;constructor(n,i){this.http=n,this.authservice=i,this.isLoadingSubject=new v.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}configAll(){this.isLoadingSubject.next(!0);let n=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(h.$g+"/purchase/config",{headers:n}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}searchProducts(n){this.isLoadingSubject.next(!0);let i="";n&&(i+="&search="+n);let t=h.$g+"/proformas/search-products?p=1"+i,r=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(t,{headers:r}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}createOrderPurchase(n){this.isLoadingSubject.next(!0);let i=h.$g+"/purchase",t=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(i,n,{headers:t}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}listOrderPurchase(n=1,i){this.isLoadingSubject.next(!0);let t=h.$g+"/purchase/index?page="+n,r=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(t,i,{headers:r}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}showPurchase(n){this.isLoadingSubject.next(!0);let i=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(h.$g+"/purchase/"+n,{headers:i}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}editOrderPurchase(n,i){this.isLoadingSubject.next(!0);let t=h.$g+"/purchase/"+n,r=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.put(t,i,{headers:r}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}deleteOrderPurchase(n){this.isLoadingSubject.next(!0);let i=h.$g+"/purchase/"+n,t=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.delete(i,{headers:t}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}procesoEntrega(n){this.isLoadingSubject.next(!0);let i=h.$g+"/purchase-detail/entrega",t=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(i,n,{headers:t}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}addPurchaseDetail(n){this.isLoadingSubject.next(!0);let i=h.$g+"/purchase-detail",t=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(i,n,{headers:t}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}editPurchaseDetail(n,i){this.isLoadingSubject.next(!0);let t=h.$g+"/purchase-detail/"+n,r=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.put(t,i,{headers:r}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}deletePurchaseDetail(n,i=0,t=0,r=0,a=""){this.isLoadingSubject.next(!0);let g=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.delete(h.$g+"/purchase-detail/"+n+"?total="+i+"&importe="+t+"&igv="+r+"&purchase_id="+a,{headers:g}).pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(i){return new(i||o)(e.LFG(u.eN),e.LFG(P.e8))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var c=d(6223);function U(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",25),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function S(o,s){1&o&&e._UZ(0,"span",26)}let C=(()=>{class o{modal;toast;purchaseService;detail_purchase;units=[];index=0;importe=0;is_edit=null;EditItemPurchase=new e.vpe;search_product="";unit_id="";price_unit=0;total_old=0;quantity=0;isLoading;constructor(n,i,t){this.modal=n,this.toast=i,this.purchaseService=t}ngOnInit(){this.unit_id=this.detail_purchase.unit.id,this.price_unit=this.detail_purchase.price_unit,this.quantity=this.detail_purchase.quantity,this.total_old=this.detail_purchase.total}edit(){if(!this.unit_id)return void this.toast.error("Validacion","Se necesita seleccionar una unidad");if(!this.price_unit)return void this.toast.error("Validacion","Se necesita digitar un precio");if(!this.quantity)return void this.toast.error("Validacion","Se necesita digitar una cantidad");let n=this.units.find(i=>i.id==this.unit_id);if(this.detail_purchase.unit=n,this.detail_purchase.price_unit=this.price_unit,this.detail_purchase.quantity=this.quantity,this.detail_purchase.total=Number((this.price_unit*this.quantity).toFixed(2)),1==this.is_edit){let i=Number((this.importe-this.total_old+Number((this.price_unit*this.quantity).toFixed(2))).toFixed(2)),t=Number((.18*i).toFixed(2));this.detail_purchase.total_purchase=i+t,this.detail_purchase.importe=i,this.detail_purchase.igv=t,this.purchaseService.editPurchaseDetail(this.detail_purchase.id,this.detail_purchase).subscribe(r=>{this.toast.success("Exito","Se edito el detallado correctamente"),this.modal.close(),this.EditItemPurchase.emit(r)})}else this.modal.close(),this.EditItemPurchase.emit(this.detail_purchase)}static \u0275fac=function(i){return new(i||o)(e.Y36(_.Kz),e.Y36(b._W),e.Y36(m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-edit-item-purchase"]],inputs:{detail_purchase:"detail_purchase",units:"units",index:"index",importe:"importe",is_edit:"is_edit"},outputs:{EditItemPurchase:"EditItemPurchase"},decls:42,vars:9,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5"],["id","kt_modal_add_user_form","action","#",1,"form"],["id","kt_modal_add_user_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_user_header","data-kt-scroll-wrappers","#kt_modal_add_user_scroll","data-kt-scroll-offset","300px",1,"d-flex","flex-column","scroll-y","me-n7","pe-7"],[1,"row"],[1,"col-12"],[1,"required","fw-bold","fs-6","mb-2"],[1,"col-6","mt-4"],["name","unit_id","placeholder","Selec. Unidad",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["type","number","name","price_unit","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","quantity","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return t.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),e._uU(15,"Producto: (*) "),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"div",14)(20,"label",13),e._uU(21,"Unidades: (*) "),e.qZA(),e.TgZ(22,"select",15),e.NdJ("ngModelChange",function(a){return t.unit_id=a}),e.TgZ(23,"option",16),e._uU(24,"Ninguno"),e.qZA(),e.YNc(25,U,3,2,"ng-container",17),e.qZA()(),e.TgZ(26,"div",14)(27,"label",13),e._uU(28,"Precio Unitario: (*) "),e.qZA(),e.TgZ(29,"input",18),e.NdJ("ngModelChange",function(a){return t.price_unit=a}),e.qZA()(),e.TgZ(30,"div",14)(31,"label",13),e._uU(32,"Cantidad Solic.: (*) "),e.qZA(),e.TgZ(33,"input",19),e.NdJ("ngModelChange",function(a){return t.quantity=a}),e.qZA()()()(),e.TgZ(34,"div",20)(35,"button",21),e.NdJ("click",function(){return t.modal.dismiss()}),e._uU(36,"Cerrar"),e.qZA(),e.TgZ(37,"button",22),e.NdJ("click",function(){return t.edit()}),e.TgZ(38,"span",23),e._uU(39,"Editar"),e.qZA(),e.YNc(40,S,1,0,"span",24),e.ALo(41,"async"),e.qZA()()()()()),2&i&&(e.xp6(3),e.hij("Edit Purchase Detail: #",t.index+1,""),e.xp6(15),e.Oqu(t.detail_purchase.product.title),e.xp6(4),e.Q6J("ngModel",t.unit_id),e.xp6(3),e.Q6J("ngForOf",t.units),e.xp6(4),e.Q6J("ngModel",t.price_unit),e.xp6(4),e.Q6J("ngModel",t.quantity),e.xp6(7),e.Q6J("ngIf",e.lcZ(41,7,t.isLoading)))},dependencies:[l.sg,l.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.On,c.F,l.Ov]})}return o})();function q(o,s){1&o&&e._UZ(0,"span",15)}let E=(()=>{class o{modal;toast;purchaseService;DeleteItemPurchase=new e.vpe;detail_purchase;importe=0;is_edit=null;purchase_id=null;index;isLoading;constructor(n,i,t){this.modal=n,this.toast=i,this.purchaseService=t}ngOnInit(){}delete(){if(1==this.is_edit){let n=Number((this.importe-this.detail_purchase.total).toFixed(2)),i=Number((.18*n).toFixed(2));this.purchaseService.deletePurchaseDetail(this.detail_purchase.id,n+i,n,i,this.purchase_id).subscribe(t=>{console.log(t),this.DeleteItemPurchase.emit(t),this.modal.close(),this.toast.success("Exito","La eliminaci\xf3n se hizo correctamente")})}else this.DeleteItemPurchase.emit(""),this.modal.close(),this.toast.success("Exito","La eliminaci\xf3n se hizo correctamente")}static \u0275fac=function(i){return new(i||o)(e.Y36(_.Kz),e.Y36(b._W),e.Y36(m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-delete-item-purchase"]],inputs:{detail_purchase:"detail_purchase",importe:"importe",is_edit:"is_edit",purchase_id:"purchase_id",index:"index"},outputs:{DeleteItemPurchase:"DeleteItemPurchase"},decls:21,vars:5,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return t.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return t.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return t.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,q,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&i&&(e.xp6(3),e.hij("Delete Detail Purchase: #",t.index+1,""),e.xp6(9),e.hij(' \xbfESTAS SEGURO DE ELIMINAR ESTE DETALLADO DEL PRODUCTO : "',t.detail_purchase.product.title,'"? '),e.xp6(7),e.Q6J("ngIf",e.lcZ(20,3,t.isLoading)))},dependencies:[l.O5,c._Y,c.JL,c.F,l.Ov]})}return o})();function M(o,s){1&o&&e._UZ(0,"span",46)}function I(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",47),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function x(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",47),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.full_name)}}function L(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",47),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function y(o,s){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",48),e._uU(3),e.qZA(),e.TgZ(4,"td",48),e._uU(5),e.qZA(),e.TgZ(6,"td",48),e._uU(7),e.qZA(),e.TgZ(8,"td",48),e._uU(9),e.qZA(),e.TgZ(10,"td",48),e._uU(11),e.qZA(),e.TgZ(12,"td",49)(13,"a",50),e.NdJ("click",function(){const t=e.CHM(n),r=t.index,a=t.$implicit,g=e.oxw();return e.KtG(g.editItemPurchase(r,a))}),e.TgZ(14,"i",51),e._UZ(15,"span",27)(16,"span",28),e.qZA()(),e.TgZ(17,"a",52),e.NdJ("click",function(){const t=e.CHM(n),r=t.index,a=t.$implicit,g=e.oxw();return e.KtG(g.deleteItemPurchase(r,a))}),e.TgZ(18,"i",53),e._UZ(19,"span",27)(20,"span",28)(21,"span",54)(22,"span",55)(23,"span",56),e.qZA()()()(),e.BQk()}if(2&o){const n=s.$implicit;e.xp6(3),e.hij(" ",n.product.title," "),e.xp6(2),e.hij(" ",n.unit.name," "),e.xp6(2),e.hij(" ",n.price_unit," PEN "),e.xp6(2),e.hij(" ",n.quantity," "),e.xp6(2),e.hij(" ",n.total," PEN ")}}let N=(()=>{class o{purchaseService;toast;modalService;full_name_user="";sucursal_user="";warehouse_id="";provider_id="";date_emision=null;type_comprobant="";n_comprobant="";description="";search_product="";unit_id="";price_unit=0;quantity=0;importe=0;igv=0;total=0;user;warehouses=[];providers=[];units=[];isLoading$;PRODUCT_SELECTED;PURCHASE_DETAILS=[];constructor(n,i,t){this.purchaseService=n,this.toast=i,this.modalService=t}ngOnInit(){this.user=this.purchaseService.authservice.user,this.full_name_user=this.user.full_name,this.sucursal_user=this.user.sucursale_name,this.configAll(),this.isLoading$=this.purchaseService.isLoading$}configAll(){this.purchaseService.configAll().subscribe(n=>{this.warehouses=n.warehouses,this.providers=n.providers,this.units=n.units,this.date_emision=n.now})}isLoadingProcess(){this.purchaseService.isLoadingSubject.next(!0),setTimeout(()=>{this.purchaseService.isLoadingSubject.next(!1)},50)}listProducts(){this.search_product?this.purchaseService.searchProducts(this.search_product).subscribe(n=>{console.log(n),n.products.data.length>1?this.openSelectedProduct(n.products.data):1==n.products.data.length?(this.PRODUCT_SELECTED=n.products.data[0],this.search_product=this.PRODUCT_SELECTED.title,this.toast.success("Exito","Se selecciono el producto "),this.isLoadingProcess()):this.toast.error("Validaci\xf3n","No hay coincidencia en la busqueda")}):this.toast.error("Validaci\xf3n","Necesitas ingresar al menos uno de los campos")}openSelectedProduct(n=[]){const i=this.modalService.open(T.T,{size:"lg",centered:!0});i.componentInstance.products=n,i.componentInstance.ProductSelected.subscribe(t=>{this.PRODUCT_SELECTED=t,this.search_product=this.PRODUCT_SELECTED.title,this.isLoadingProcess(),this.toast.success("Exito","Se selecciono el producto")})}addDetail(){if(!this.PRODUCT_SELECTED)return void this.toast.error("Validacion","Se necesita seleccionar un producto");if(!this.unit_id)return void this.toast.error("Validacion","Se necesita seleccionar una unidad");if(!this.price_unit)return void this.toast.error("Validacion","Se necesita digitar un precio");if(!this.quantity)return void this.toast.error("Validacion","Se necesita digitar una cantidad");let n=this.units.find(i=>i.id==this.unit_id);this.PURCHASE_DETAILS.push({product:this.PRODUCT_SELECTED,unit:n,price_unit:this.price_unit,quantity:this.quantity,total:Number((this.price_unit*this.quantity).toFixed(2))}),this.PRODUCT_SELECTED=null,this.unit_id="",this.price_unit=0,this.quantity=0,this.search_product="",this.calcTotalPurchase()}calcTotalPurchase(){this.importe=Number(this.PURCHASE_DETAILS.reduce((n,i)=>n+i.total,0).toFixed(2)),this.igv=Number((.18*this.importe).toFixed(2)),this.total=Number((this.importe+this.igv).toFixed(2)),this.isLoadingProcess()}editItemPurchase(n,i){const t=this.modalService.open(C,{centered:!0,size:"md"});t.componentInstance.detail_purchase=i,t.componentInstance.units=this.units,t.componentInstance.index=n,t.componentInstance.EditItemPurchase.subscribe(r=>{this.PURCHASE_DETAILS[n]=r,this.isLoadingProcess(),setTimeout(()=>{this.calcTotalPurchase()},50)})}deleteItemPurchase(n,i){const t=this.modalService.open(E,{centered:!0,size:"md"});t.componentInstance.detail_purchase=i,t.componentInstance.index=n,t.componentInstance.DeleteItemPurchase.subscribe(r=>{this.PURCHASE_DETAILS.splice(n,1),this.isLoadingProcess(),setTimeout(()=>{this.calcTotalPurchase()},50)})}createOrderPurchase(){this.warehouse_id?this.provider_id?this.type_comprobant?this.n_comprobant?0!=this.PURCHASE_DETAILS.length?this.purchaseService.createOrderPurchase({warehouse_id:this.warehouse_id,provider_id:this.provider_id,date_emision:this.date_emision,type_comprobant:this.type_comprobant,n_comprobant:this.n_comprobant,description:this.description,importe:this.importe,igv:this.igv,total:this.total,details:this.PURCHASE_DETAILS}).subscribe(i=>{console.log(i),this.toast.success("Exito","La orden de compra se ha generado correctamente"),this.warehouse_id="",this.provider_id="",this.type_comprobant="",this.n_comprobant="",this.description="",this.importe=0,this.igv=0,this.total=0,this.PURCHASE_DETAILS=[],this.calcTotalPurchase()},i=>{console.log(i),this.toast.error("ERROR","Hubo un problema en el servidor con tu orden, comunicate con soporte")}):this.toast.error("Validacion","Necesitas agregar al menos un producto al detallado"):this.toast.error("Validacion","Necesitas digitar un n\xb0 de comprobante"):this.toast.error("Validacion","Necesitas seleccionar un tipo de comprobante"):this.toast.error("Validacion","Necesitas seleccionar un proveedor"):this.toast.error("Validacion","Necesitas seleccionar un almacen")}static \u0275fac=function(i){return new(i||o)(e.Y36(m),e.Y36(b._W),e.Y36(_.FF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-create-purchase"]],decls:123,vars:22,consts:[[1,"card"],[1,"card-body"],[1,"row"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"col-3"],[1,"required","fw-bold","fs-6","mb-2"],["type","text","disabled","","name","name","placeholder","Usuario de la compral",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","text","disabled","","name","name","placeholder","Por ejemplo: Lima",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["name","warehouse_id","placeholder","Selec. Almacen",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["name","provider_id","placeholder","Selec. Proveedor",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[1,"row","py-5"],[1,"input-group","input-group-solid"],["type","date","name","date_emision",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["name","type_comprobant","placeholder","Selec. Tipo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","FACTURA ELECTR\xd3NICO"],["value","NOTA DE CREDITO"],["value","NOTA DE DEBITO"],["value","RECIBO POR HONARIOS"],["value","GUIA DE REMISION"],["type","text","name","n_comprobant","placeholder","F-0001",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"col-4"],[1,"fs-6","fw-semibold","mb-2"],["rows","3","name","description","placeholder","",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search Products",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["name","unit_id","placeholder","Selec. Unidad",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[1,"col-2"],["type","number","name","price_unit","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","quantity","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bold","text-muted"],[1,"min-w-140px"],[1,"min-w-120px"],[1,"min-w-100px","text-end"],["type","number","name","importe","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","igv","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","total","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"text-gray-900","fw-bold","text-hover-primary","fs-6"],[1,"text-end"],["href","#","onclick","return false",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,M,1,0,"span",3),e.ALo(4,"async"),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Responsable: (*) "),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(a){return t.full_name_user=a}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"Sucursal: (*) "),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(a){return t.sucursal_user=a}),e.qZA()(),e.TgZ(13,"div",4)(14,"label",5),e._uU(15,"Almacenes: (*) "),e.qZA(),e.TgZ(16,"select",8),e.NdJ("ngModelChange",function(a){return t.warehouse_id=a}),e.TgZ(17,"option",9),e._uU(18,"Ninguno"),e.qZA(),e.YNc(19,I,3,2,"ng-container",10),e.qZA()(),e.TgZ(20,"div",4)(21,"label",5),e._uU(22,"Proveedor: (*) "),e.qZA(),e.TgZ(23,"select",11),e.NdJ("ngModelChange",function(a){return t.provider_id=a}),e.TgZ(24,"option",9),e._uU(25,"Ninguno"),e.qZA(),e.YNc(26,x,3,2,"ng-container",10),e.qZA()()(),e.TgZ(27,"div",12)(28,"div",4)(29,"label",5),e._uU(30,"Fecha de Emisi\xf3n: (*) "),e.qZA(),e.TgZ(31,"div",13)(32,"input",14),e.NdJ("ngModelChange",function(a){return t.date_emision=a}),e.qZA()()(),e.TgZ(33,"div",4)(34,"label",5),e._uU(35,"Tipo de comprobante: (*) "),e.qZA(),e.TgZ(36,"select",15),e.NdJ("ngModelChange",function(a){return t.type_comprobant=a}),e.TgZ(37,"option",9),e._uU(38,"Ninguno"),e.qZA(),e.TgZ(39,"option",16),e._uU(40,"FACTURA ELECTR\xd3NICO"),e.qZA(),e.TgZ(41,"option",17),e._uU(42,"NOTA DE CREDITO"),e.qZA(),e.TgZ(43,"option",18),e._uU(44,"NOTA DE DEBITO"),e.qZA(),e.TgZ(45,"option",19),e._uU(46,"RECIBO POR HONARIOS"),e.qZA(),e.TgZ(47,"option",20),e._uU(48,"GUIA DE REMISION"),e.qZA()()(),e.TgZ(49,"div",4)(50,"label",5),e._uU(51,"N\xb0 de Comprobante: (*) "),e.qZA(),e.TgZ(52,"input",21),e.NdJ("ngModelChange",function(a){return t.n_comprobant=a}),e.qZA()()(),e.TgZ(53,"div",2)(54,"div",22)(55,"label",23),e._uU(56,"Nota Final:"),e.qZA(),e.TgZ(57,"textarea",24),e.NdJ("ngModelChange",function(a){return t.description=a}),e.qZA()()(),e.TgZ(58,"div",12)(59,"div",4)(60,"label",5),e._uU(61,"Buscar Producto: (*) "),e.qZA(),e.TgZ(62,"div",25)(63,"i",26),e._UZ(64,"span",27)(65,"span",28),e.qZA(),e.TgZ(66,"input",29),e.NdJ("ngModelChange",function(a){return t.search_product=a})("keyup.enter",function(){return t.listProducts()}),e.qZA()()(),e.TgZ(67,"div",4)(68,"label",5),e._uU(69,"Unidades: (*) "),e.qZA(),e.TgZ(70,"select",30),e.NdJ("ngModelChange",function(a){return t.unit_id=a}),e.TgZ(71,"option",9),e._uU(72,"Ninguno"),e.qZA(),e.YNc(73,L,3,2,"ng-container",10),e.qZA()(),e.TgZ(74,"div",31)(75,"label",5),e._uU(76,"Precio Unitario: (*) "),e.qZA(),e.TgZ(77,"input",32),e.NdJ("ngModelChange",function(a){return t.price_unit=a}),e.qZA()(),e.TgZ(78,"div",31)(79,"label",5),e._uU(80,"Cantidad Solic.: (*) "),e.qZA(),e.TgZ(81,"input",33),e.NdJ("ngModelChange",function(a){return t.quantity=a}),e.qZA()(),e.TgZ(82,"div",31)(83,"button",34),e.NdJ("click",function(){return t.addDetail()}),e._uU(84,"+"),e.qZA()()(),e.TgZ(85,"div",12)(86,"div",35)(87,"div",36)(88,"table",37)(89,"thead")(90,"tr",38)(91,"th",39),e._uU(92,"Producto"),e.qZA(),e.TgZ(93,"th",40),e._uU(94,"Unidad"),e.qZA(),e.TgZ(95,"th",40),e._uU(96,"Precio Unitario"),e.qZA(),e.TgZ(97,"th",40),e._uU(98,"Cantidad"),e.qZA(),e.TgZ(99,"th",40),e._uU(100,"Total"),e.qZA(),e.TgZ(101,"th",41),e._uU(102,"Actions"),e.qZA()()(),e.TgZ(103,"tbody"),e.YNc(104,y,24,5,"ng-container",10),e.TgZ(105,"tr"),e._UZ(106,"td")(107,"td"),e.TgZ(108,"td")(109,"input",42),e.NdJ("ngModelChange",function(a){return t.importe=a}),e.qZA(),e.TgZ(110,"small"),e._uU(111,"Importe:"),e.qZA()(),e.TgZ(112,"td")(113,"input",43),e.NdJ("ngModelChange",function(a){return t.igv=a}),e.qZA(),e.TgZ(114,"small"),e._uU(115,"Igv:"),e.qZA()(),e.TgZ(116,"td")(117,"input",44),e.NdJ("ngModelChange",function(a){return t.total=a}),e.qZA(),e.TgZ(118,"small"),e._uU(119,"Total:"),e.qZA()()()()()()(),e.TgZ(120,"div",35)(121,"button",45),e.NdJ("click",function(){return t.createOrderPurchase()}),e._uU(122,"Generar Orden De Compra"),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,20,t.isLoading$)),e.xp6(5),e.Q6J("ngModel",t.full_name_user),e.xp6(4),e.Q6J("ngModel",t.sucursal_user),e.xp6(4),e.Q6J("ngModel",t.warehouse_id),e.xp6(3),e.Q6J("ngForOf",t.warehouses),e.xp6(4),e.Q6J("ngModel",t.provider_id),e.xp6(3),e.Q6J("ngForOf",t.providers),e.xp6(6),e.Q6J("ngModel",t.date_emision),e.xp6(4),e.Q6J("ngModel",t.type_comprobant),e.xp6(16),e.Q6J("ngModel",t.n_comprobant),e.xp6(5),e.Q6J("ngModel",t.description),e.xp6(9),e.Q6J("ngModel",t.search_product),e.xp6(4),e.Q6J("ngModel",t.unit_id),e.xp6(3),e.Q6J("ngForOf",t.units),e.xp6(4),e.Q6J("ngModel",t.price_unit),e.xp6(4),e.Q6J("ngModel",t.quantity),e.xp6(23),e.Q6J("ngForOf",t.PURCHASE_DETAILS),e.xp6(5),e.Q6J("ngModel",t.importe),e.xp6(4),e.Q6J("ngModel",t.igv),e.xp6(4),e.Q6J("ngModel",t.total))},dependencies:[l.sg,l.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On,l.Ov]})}return o})();function D(o,s){1&o&&e._UZ(0,"span",15)}let k=(()=>{class o{modal;toast;purchaseService;DeletePurchase=new e.vpe;purchase;isLoading;constructor(n,i,t){this.modal=n,this.toast=i,this.purchaseService=t}ngOnInit(){}delete(){this.purchaseService.deleteOrderPurchase(this.purchase.id).subscribe(n=>{console.log(n),this.DeletePurchase.emit(n),this.modal.close(),this.toast.success("Exito","La eliminaci\xf3n se hizo correctamente")})}static \u0275fac=function(i){return new(i||o)(e.Y36(_.Kz),e.Y36(b._W),e.Y36(m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-delete-purchase"]],inputs:{purchase:"purchase"},outputs:{DeletePurchase:"DeletePurchase"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_add_user_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return t.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12," \xbfESTAS SEGURO DE ELIMINAR ESTA ORDEN DE COMPRA? "),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return t.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return t.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,D,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&i&&(e.xp6(3),e.hij("Delete Purchase: #",t.purchase.id,""),e.xp6(16),e.Q6J("ngIf",e.lcZ(20,2,t.isLoading)))},dependencies:[l.O5,c._Y,c.JL,c.F,l.Ov]})}return o})();function R(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",41),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function J(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",41),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.full_name)}}function O(o,s){1&o&&e._UZ(0,"span",42)}function w(o,s){1&o&&(e.TgZ(0,"span",51),e._uU(1,"SOLICITUD"),e.qZA())}function Q(o,s){1&o&&(e.TgZ(0,"span",52),e._uU(1,"REVISION"),e.qZA())}function F(o,s){1&o&&(e.TgZ(0,"span",53),e._uU(1,"PARCIAL"),e.qZA())}function H(o,s){1&o&&(e.TgZ(0,"span",54),e._uU(1,"ENTREGADO"),e.qZA())}function j(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"a",55),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deletePurchase(t))}),e.TgZ(1,"i",56),e._UZ(2,"span",7)(3,"span",8)(4,"span",57)(5,"span",58)(6,"span",59),e.qZA()()}}function Y(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e.YNc(17,w,2,0,"span",43),e.YNc(18,Q,2,0,"span",44),e.YNc(19,F,2,0,"span",45),e.YNc(20,H,2,0,"span",46),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td",47)(24,"a",48)(25,"i",49),e._UZ(26,"span",7)(27,"span",8),e.qZA()(),e.YNc(28,j,7,0,"a",50),e.qZA()(),e.BQk()),2&o){const n=s.$implicit;e.xp6(3),e.hij(" #",n.id," "),e.xp6(2),e.hij(" ",n.warehouse.name," "),e.xp6(2),e.hij(" ",n.user.full_name," "),e.xp6(2),e.hij(" ",n.date_emision," "),e.xp6(2),e.hij(" ",n.total," PEN"),e.xp6(2),e.hij(" ",n.importe," PEN"),e.xp6(2),e.hij(" ",n.igv," PEN"),e.xp6(2),e.Q6J("ngIf",1==n.state),e.xp6(1),e.Q6J("ngIf",2==n.state),e.xp6(1),e.Q6J("ngIf",3==n.state),e.xp6(1),e.Q6J("ngIf",4==n.state),e.xp6(2),e.hij(" ",n.provider.full_name," "),e.xp6(2),e.Q6J("routerLink","/compras/listado/editar/"+n.id),e.xp6(4),e.Q6J("ngIf",3!=n.state&&4!=n.state)}}function $(o,s){1&o&&e._UZ(0,"span",51)}function V(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",52),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function z(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",52),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.full_name)}}function G(o,s){1&o&&(e.ynx(0),e.TgZ(1,"option",53),e._uU(2,"SOLICITUD"),e.qZA(),e.TgZ(3,"option",54),e._uU(4,"REVISI\xd3N"),e.qZA(),e.BQk())}function K(o,s){1&o&&(e.TgZ(0,"option",55),e._uU(1,"PARCIAL"),e.qZA())}function W(o,s){1&o&&(e.TgZ(0,"option",56),e._uU(1,"ENTREGADO"),e.qZA())}function X(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.editOrderPurchase())}),e._uU(1,"Editar Orden De Compra"),e.qZA()}}function ee(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"option",52),e._uU(2),e.qZA(),e.BQk()),2&o){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function te(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.addDetail())}),e._uU(1,"+"),e.qZA()}}function ne(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"div",64)(1,"input",65),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.selectedDetail(t))}),e.qZA()()}}function ie(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"a",66),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(),r=t.index,a=t.$implicit,g=e.oxw();return e.KtG(g.editItemPurchase(r,a))}),e.TgZ(1,"i",67),e._UZ(2,"span",33)(3,"span",34),e.qZA()()}}function oe(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"a",68),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(),r=t.index,a=t.$implicit,g=e.oxw();return e.KtG(g.deleteItemPurchase(r,a))}),e.TgZ(1,"i",69),e._UZ(2,"span",33)(3,"span",34)(4,"span",70)(5,"span",71)(6,"span",72),e.qZA()()}}function re(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",59),e.YNc(3,ne,2,0,"div",60),e.qZA(),e.TgZ(4,"td",59),e._uU(5),e.qZA(),e.TgZ(6,"td",59),e._uU(7),e.qZA(),e.TgZ(8,"td",59),e._uU(9),e.qZA(),e.TgZ(10,"td",59),e._uU(11),e.qZA(),e.TgZ(12,"td",59),e._uU(13),e.qZA(),e.TgZ(14,"td",61),e.YNc(15,ie,4,0,"a",62),e.YNc(16,oe,7,0,"a",63),e.qZA()(),e.BQk()),2&o){const n=s.$implicit;e.xp6(3),e.Q6J("ngIf",2!=n.state),e.xp6(2),e.hij(" ",n.product.title," "),e.xp6(2),e.hij(" ",n.unit.name," "),e.xp6(2),e.hij(" ",n.price_unit," PEN "),e.xp6(2),e.hij(" ",n.quantity," "),e.xp6(2),e.hij(" ",n.total," PEN "),e.xp6(2),e.Q6J("ngIf",2!=n.state),e.xp6(1),e.Q6J("ngIf",2!=n.state)}}function ae(o,s){if(1&o){const n=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.procesarEntrega())}),e._uU(1,"Confirmar Entrega"),e.qZA()}}const se=[{path:"",component:A,children:[{path:"registro",component:N},{path:"listado",component:(()=>{class o{modalService;purchaseService;PURCHASES=[];isLoading$;totalPages=0;currentPage=1;warehouses=[];providers=[];search="";warehouse_id="";n_comprobant="";provider_id="";search_product="";start_date=null;end_date=null;constructor(n,i){this.modalService=n,this.purchaseService=i}ngOnInit(){this.isLoading$=this.purchaseService.isLoading$,this.listOrderPurchase(),this.configAll()}listOrderPurchase(n=1){this.purchaseService.listOrderPurchase(n,{warehouse_id:this.warehouse_id,n_orden:this.search,provider_id:this.provider_id,n_comprobant:this.n_comprobant,start_date:this.start_date,end_date:this.end_date,search_product:this.search_product}).subscribe(t=>{console.log(t),this.PURCHASES=t.purchases.data,this.totalPages=t.total,this.currentPage=n})}resetlistOrderPurchase(){this.search="",this.warehouse_id="",this.start_date=null,this.end_date=null,this.search_product="",this.n_comprobant="",this.provider_id="",this.listOrderPurchase()}configAll(){this.purchaseService.configAll().subscribe(n=>{console.log(n),this.warehouses=n.warehouses,this.providers=n.providers})}loadPage(n){this.listOrderPurchase(n)}deletePurchase(n){const i=this.modalService.open(k,{centered:!0,size:"md"});i.componentInstance.purchase=n,i.componentInstance.DeletePurchase.subscribe(t=>{let r=this.PURCHASES.findIndex(a=>a.id==n.id);-1!=r&&this.PURCHASES.splice(r,1)})}static \u0275fac=function(i){return new(i||o)(e.Y36(_.FF),e.Y36(m))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-lists-purchases"]],decls:110,vars:18,consts:[[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"row","align-items-center"],[1,"col-3"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search N\xb0 Orden",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["name","warehouse_id","placeholder","Selec. Almacen",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"text-muted","fs-7"],[1,"col-2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search N\xb0 Comprobant",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["name","provider_id","placeholder","Selec. Proveedor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search Producto",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],[1,"input-group","input-group-solid"],["type","date",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],[1,"col-1","d-flex"],[1,"btn","btn-primary","btn-sm","mx-1",3,"click"],[1,"ki-duotone","ki-magnifier","fs-2"],[1,"btn","btn-dark","btn-sm","mx-1",3,"click"],[1,"ki-duotone","ki-loading","fs-2"],["routerLink","/compras/registro",1,"btn","btn-primary"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-body","pt-0"],["id","kt_customers_table_wrapper",1,"dt-container","dt-bootstrap5","dt-empty-footer"],["id","",1,"table-responsive"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable",2,"width","1199.5px"],["role","row",1,"text-start","text-gray-500","fw-bold","fs-7","text-uppercase","gs-0"],["data-dt-column","1","rowspan","1","colspan","1","aria-label","Customer Name: Activate to sort","tabindex","0",1,"min-w-125px","dt-orderable-asc","dt-orderable-desc"],["role","button",1,"dt-column-title"],[1,"dt-column-order"],["data-dt-column","2","rowspan","1","colspan","1","aria-label","Email: Activate to sort","tabindex","0",1,"min-w-125px","dt-orderable-asc","dt-orderable-desc"],["data-dt-column","5","rowspan","1","colspan","1","aria-label","Created Date: Activate to sort","tabindex","0",1,"min-w-125px","dt-orderable-asc","dt-orderable-desc"],["data-dt-column","6","rowspan","1","colspan","1","aria-label","Actions",1,"text-end","min-w-70px","dt-orderable-none"],[1,"dt-column-title"],[1,"fw-semibold","text-gray-600"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"],[3,"value"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["class","badge badge-light-warning",4,"ngIf"],["class","badge badge-light-danger",4,"ngIf"],["class","badge badge-light-info",4,"ngIf"],["class","badge badge-light-primary",4,"ngIf"],[1,""],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"routerLink"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false;","class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm",3,"click",4,"ngIf"],[1,"badge","badge-light-warning"],[1,"badge","badge-light-danger"],[1,"badge","badge-light-info"],[1,"badge","badge-light-primary"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"i",6),e._UZ(7,"span",7)(8,"span",8),e.qZA(),e.TgZ(9,"input",9),e.NdJ("ngModelChange",function(a){return t.search=a})("keyup.enter",function(){return t.listOrderPurchase()}),e.qZA()()(),e.TgZ(10,"div",4)(11,"select",10),e.NdJ("ngModelChange",function(a){return t.warehouse_id=a}),e.TgZ(12,"option",11),e._uU(13,"Ninguno"),e.qZA(),e.YNc(14,R,3,2,"ng-container",12),e.qZA(),e.TgZ(15,"div",13),e._uU(16,"Almacen."),e.qZA()(),e.TgZ(17,"div",14)(18,"div",5)(19,"i",6),e._UZ(20,"span",7)(21,"span",8),e.qZA(),e.TgZ(22,"input",15),e.NdJ("ngModelChange",function(a){return t.n_comprobant=a})("keyup.enter",function(){return t.listOrderPurchase()}),e.qZA()()(),e.TgZ(23,"div",4)(24,"select",16),e.NdJ("ngModelChange",function(a){return t.provider_id=a}),e.TgZ(25,"option",11),e._uU(26,"Ninguno"),e.qZA(),e.YNc(27,J,3,2,"ng-container",12),e.qZA(),e.TgZ(28,"div",13),e._uU(29,"Proveedores."),e.qZA()(),e.TgZ(30,"div",4)(31,"div",5)(32,"i",6),e._UZ(33,"span",7)(34,"span",8),e.qZA(),e.TgZ(35,"input",17),e.NdJ("ngModelChange",function(a){return t.search_product=a})("keyup.enter",function(){return t.listOrderPurchase()}),e.qZA()()(),e.TgZ(36,"div",14)(37,"div",18)(38,"input",19),e.NdJ("ngModelChange",function(a){return t.start_date=a}),e.qZA()(),e.TgZ(39,"div",13),e._uU(40,"Fecha de inicio(Emisi\xf3n)."),e.qZA()(),e.TgZ(41,"div",14)(42,"div",18)(43,"input",19),e.NdJ("ngModelChange",function(a){return t.end_date=a}),e.qZA()(),e.TgZ(44,"div",13),e._uU(45,"Fecha fin(Emisi\xf3n)."),e.qZA()(),e.TgZ(46,"div",20)(47,"button",21),e.NdJ("click",function(){return t.listOrderPurchase()}),e.TgZ(48,"i",22),e._UZ(49,"span",7)(50,"span",8),e.qZA()(),e.TgZ(51,"button",23),e.NdJ("click",function(){return t.resetlistOrderPurchase()}),e.TgZ(52,"i",24),e._UZ(53,"span",7)(54,"span",8),e.qZA()()(),e.TgZ(55,"div",14)(56,"a",25),e._uU(57," + Add Purchase "),e.qZA()()()(),e.YNc(58,O,1,0,"span",26),e.ALo(59,"async"),e.qZA(),e.TgZ(60,"div",27)(61,"div",28)(62,"div",29)(63,"table",30)(64,"thead")(65,"tr",31)(66,"th",32)(67,"span",33),e._uU(68,"N\xb0 Orden"),e.qZA(),e._UZ(69,"span",34),e.qZA(),e.TgZ(70,"th",32)(71,"span",33),e._uU(72,"Almacen"),e.qZA(),e._UZ(73,"span",34),e.qZA(),e.TgZ(74,"th",32)(75,"span",33),e._uU(76,"Responsable"),e.qZA(),e._UZ(77,"span",34),e.qZA(),e.TgZ(78,"th",32)(79,"span",33),e._uU(80,"Fecha Emisi\xf3n"),e.qZA(),e._UZ(81,"span",34),e.qZA(),e.TgZ(82,"th",32)(83,"span",33),e._uU(84,"Total"),e.qZA(),e._UZ(85,"span",34),e.qZA(),e.TgZ(86,"th",32)(87,"span",33),e._uU(88,"Importe"),e.qZA(),e._UZ(89,"span",34),e.qZA(),e.TgZ(90,"th",35)(91,"span",33),e._uU(92,"Igv"),e.qZA(),e._UZ(93,"span",34),e.qZA(),e.TgZ(94,"th",36)(95,"span",33),e._uU(96,"State"),e.qZA(),e._UZ(97,"span",34),e.qZA(),e.TgZ(98,"th",36)(99,"span",33),e._uU(100,"Proveedor"),e.qZA(),e._UZ(101,"span",34),e.qZA(),e.TgZ(102,"th",37)(103,"span",38),e._uU(104,"Actions"),e.qZA(),e._UZ(105,"span",34),e.qZA()()(),e.TgZ(106,"tbody",39),e.YNc(107,Y,29,14,"ng-container",12),e.qZA(),e._UZ(108,"tfoot"),e.qZA()(),e.TgZ(109,"ngb-pagination",40),e.NdJ("pageChange",function(a){return t.currentPage=a})("pageChange",function(a){return t.loadPage(a)}),e.qZA()()()()),2&i&&(e.xp6(9),e.Q6J("ngModel",t.search),e.xp6(2),e.Q6J("ngModel",t.warehouse_id),e.xp6(3),e.Q6J("ngForOf",t.warehouses),e.xp6(8),e.Q6J("ngModel",t.n_comprobant),e.xp6(2),e.Q6J("ngModel",t.provider_id),e.xp6(3),e.Q6J("ngForOf",t.providers),e.xp6(8),e.Q6J("ngModel",t.search_product),e.xp6(3),e.Q6J("ngModel",t.start_date),e.xp6(5),e.Q6J("ngModel",t.end_date),e.xp6(15),e.Q6J("ngIf",e.lcZ(59,16,t.isLoading$)),e.xp6(49),e.Q6J("ngForOf",t.PURCHASES),e.xp6(2),e.Q6J("collectionSize",t.totalPages)("page",t.currentPage)("pageSize",25)("rotate",!0)("boundaryLinks",!0))},dependencies:[l.sg,l.O5,f.rH,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On,_.N9,l.Ov]})}return o})()},{path:"listado/editar/:id",component:(()=>{class o{purchaseService;toast;modalService;ActivedRoute;full_name_user="";sucursal_user="";warehouse_id="";provider_id="";date_emision=null;type_comprobant="";n_comprobant="";description="";search_product="";unit_id="";price_unit=0;quantity=0;importe=0;igv=0;total=0;user;warehouses=[];providers=[];units=[];isLoading$;PRODUCT_SELECTED;PURCHASE_DETAILS=[];ORDER_PURCHASE_ID="";PURCHASE_SELECTED=null;state="";purchase_details=[];constructor(n,i,t,r){this.purchaseService=n,this.toast=i,this.modalService=t,this.ActivedRoute=r}ngOnInit(){this.user=this.purchaseService.authservice.user,this.ActivedRoute.params.subscribe(n=>{this.ORDER_PURCHASE_ID=n.id}),this.showPurchase(),this.isLoading$=this.purchaseService.isLoading$}showPurchase(){this.purchaseService.showPurchase(this.ORDER_PURCHASE_ID).subscribe(n=>{console.log(n),this.PURCHASE_SELECTED=n.purchase,this.full_name_user=this.PURCHASE_SELECTED.user.full_name,this.sucursal_user=this.PURCHASE_SELECTED.user.sucursale.name,this.warehouse_id=this.PURCHASE_SELECTED.warehouse_id,this.provider_id=this.PURCHASE_SELECTED.provider_id,this.date_emision=this.PURCHASE_SELECTED.date_emision,this.type_comprobant=this.PURCHASE_SELECTED.type_comprobant,this.n_comprobant=this.PURCHASE_SELECTED.n_comprobant,this.description=this.PURCHASE_SELECTED.description,this.PURCHASE_DETAILS=this.PURCHASE_SELECTED.details,this.importe=this.PURCHASE_SELECTED.importe,this.igv=this.PURCHASE_SELECTED.igv,this.total=this.PURCHASE_SELECTED.total,this.state=this.PURCHASE_SELECTED.state,0==this.warehouses.length&&this.configAll()})}configAll(){this.purchaseService.configAll().subscribe(n=>{this.warehouses=n.warehouses,this.providers=n.providers,this.units=n.units})}isLoadingProcess(){this.purchaseService.isLoadingSubject.next(!0),setTimeout(()=>{this.purchaseService.isLoadingSubject.next(!1)},50)}listProducts(){this.search_product?this.purchaseService.searchProducts(this.search_product).subscribe(n=>{console.log(n),n.products.data.length>1?this.openSelectedProduct(n.products.data):1==n.products.data.length?(this.PRODUCT_SELECTED=n.products.data[0],this.search_product=this.PRODUCT_SELECTED.title,this.toast.success("Exito","Se selecciono el producto "),this.isLoadingProcess()):this.toast.error("Validaci\xf3n","No hay coincidencia en la busqueda")}):this.toast.error("Validaci\xf3n","Necesitas ingresar al menos uno de los campos")}openSelectedProduct(n=[]){const i=this.modalService.open(T.T,{size:"lg",centered:!0});i.componentInstance.products=n,i.componentInstance.ProductSelected.subscribe(t=>{this.PRODUCT_SELECTED=t,this.search_product=this.PRODUCT_SELECTED.title,this.isLoadingProcess(),this.toast.success("Exito","Se selecciono el producto")})}addDetail(){if(!this.PRODUCT_SELECTED)return void this.toast.error("Validacion","Se necesita seleccionar un producto");if(!this.unit_id)return void this.toast.error("Validacion","Se necesita seleccionar una unidad");if(!this.price_unit)return void this.toast.error("Validacion","Se necesita digitar un precio");if(!this.quantity)return void this.toast.error("Validacion","Se necesita digitar una cantidad");let n=this.units.find(r=>r.id==this.unit_id),i=Number((this.importe+Number((this.price_unit*this.quantity).toFixed(2))).toFixed(2)),t=Number((.18*i).toFixed(2));this.purchaseService.addPurchaseDetail({purchase_id:this.ORDER_PURCHASE_ID,product:this.PRODUCT_SELECTED,unit:n,price_unit:this.price_unit,quantity:this.quantity,total:Number((this.price_unit*this.quantity).toFixed(2)),total_purchase:i+t,importe:i,igv:t}).subscribe(r=>{console.log(r),this.toast.success("Exito","Se agrego un nuevo producto a la orden de compra"),this.PRODUCT_SELECTED=null,this.unit_id="",this.price_unit=0,this.quantity=0,this.search_product="",this.PURCHASE_DETAILS.push(r.purchase_detail),this.total=r.total,this.importe=r.importe,this.igv=r.igv})}calcTotalPurchase(){this.importe=Number(this.PURCHASE_DETAILS.reduce((n,i)=>n+i.total,0).toFixed(2)),this.igv=Number((.18*this.importe).toFixed(2)),this.total=Number((this.importe+this.igv).toFixed(2)),this.isLoadingProcess()}editItemPurchase(n,i){const t=this.modalService.open(C,{centered:!0,size:"md"});t.componentInstance.detail_purchase=i,t.componentInstance.units=this.units,t.componentInstance.index=n,t.componentInstance.importe=this.importe,t.componentInstance.is_edit=1,t.componentInstance.EditItemPurchase.subscribe(r=>{this.PURCHASE_DETAILS[n]=r.purchase_detail,this.total=r.total,this.importe=r.importe,this.igv=r.igv,this.isLoadingProcess()})}deleteItemPurchase(n,i){const t=this.modalService.open(E,{centered:!0,size:"md"});t.componentInstance.detail_purchase=i,t.componentInstance.index=n,t.componentInstance.importe=this.importe,t.componentInstance.is_edit=1,t.componentInstance.purchase_id=this.ORDER_PURCHASE_ID,t.componentInstance.DeleteItemPurchase.subscribe(r=>{this.PURCHASE_DETAILS.splice(n,1),this.isLoadingProcess(),this.total=r.total,this.importe=r.importe,this.igv=r.igv})}editOrderPurchase(){this.warehouse_id?this.provider_id?this.type_comprobant?this.n_comprobant?this.purchaseService.editOrderPurchase(this.ORDER_PURCHASE_ID,{warehouse_id:this.warehouse_id,provider_id:this.provider_id,date_emision:this.date_emision,type_comprobant:this.type_comprobant,n_comprobant:this.n_comprobant,description:this.description,importe:this.importe,igv:this.igv,total:this.total,state:this.state}).subscribe(i=>{console.log(i),this.toast.success("Exito","La orden de compra se ha editado correctamente")},i=>{console.log(i),this.toast.error("ERROR","Hubo un problema en el servidor con tu orden, comunicate con soporte")}):this.toast.error("Validacion","Necesitas digitar un n\xb0 de comprobante"):this.toast.error("Validacion","Necesitas seleccionar un tipo de comprobante"):this.toast.error("Validacion","Necesitas seleccionar un proveedor"):this.toast.error("Validacion","Necesitas seleccionar un almacen")}selectedDetail(n){let i=this.purchase_details.findIndex(t=>t==n.id);-1!=i?this.purchase_details.splice(i,1):this.purchase_details.push(n.id),console.log(this.purchase_details)}procesarEntrega(){0!=this.purchase_details.length?this.purchaseService.procesoEntrega({purchase_id:this.ORDER_PURCHASE_ID,purchase_details:this.purchase_details}).subscribe(i=>{console.log(i),this.toast.success("Exito","El proceso de entrega se dio correctamente"),this.showPurchase()},i=>{console.log(i),this.toast.error("Error","Se detecto un error en la solicitud revise la consola del navegador")}):this.toast.error("Validaci\xf3n","Necesitas seleccionar un item para procesar la entrega")}static \u0275fac=function(i){return new(i||o)(e.Y36(m),e.Y36(b._W),e.Y36(_.FF),e.Y36(f.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-edit-purchase"]],decls:137,vars:29,consts:[[1,"card"],[1,"card-body"],[1,"row"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"col-3"],[1,"required","fw-bold","fs-6","mb-2"],["type","text","disabled","","name","name","placeholder","Usuario de la compral",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","text","disabled","","name","name","placeholder","Por ejemplo: Lima",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["name","warehouse_id","placeholder","Selec. Almacen",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],["name","provider_id","placeholder","Selec. Proveedor",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[1,"row","py-5"],[1,"input-group","input-group-solid"],["type","date","name","date_emision",1,"form-control","form-control-lg","form-control-solid",3,"ngModel","ngModelChange"],["name","type_comprobant","placeholder","Selec. Tipo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","FACTURA ELECTR\xd3NICO"],["value","NOTA DE CREDITO"],["value","NOTA DE DEBITO"],["value","RECIBO POR HONARIOS"],["value","GUIA DE REMISION"],["type","text","name","n_comprobant","placeholder","F-0001",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["name","state","placeholder","Selec. Tipo",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[4,"ngIf"],["value","3",4,"ngIf"],["value","4",4,"ngIf"],[1,"row","align-items-center"],[1,"col-4"],[1,"fs-6","fw-semibold","mb-2"],["rows","3","name","description","placeholder","",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Search Products",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["name","unit_id","placeholder","Selec. Unidad",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],[1,"col-2"],["type","number","name","price_unit","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","quantity","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bold","text-muted"],[1,"min-w-140px"],[1,"min-w-120px"],[1,"min-w-100px","text-end"],["type","number","name","importe","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","igv","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],["type","number","name","total","placeholder","Por ejemplo: 49.50",1,"form-control","form-control-solid","mb-3","mb-lg-0",3,"ngModel","ngModelChange"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"text-gray-900","fw-bold","text-hover-primary","fs-6"],["class","form-check form-check-custom form-check-solid mb-2",4,"ngIf"],[1,"text-end"],["href","#","onclick","return false","class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1",3,"click",4,"ngIf"],["href","#","onclick","return false","class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm",3,"click",4,"ngIf"],[1,"form-check","form-check-custom","form-check-solid","mb-2"],["type","checkbox",1,"form-check-input",3,"click"],["href","#","onclick","return false",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,$,1,0,"span",3),e.ALo(4,"async"),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Responsable: (*) "),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(a){return t.full_name_user=a}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",5),e._uU(11,"Sucursal: (*) "),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(a){return t.sucursal_user=a}),e.qZA()(),e.TgZ(13,"div",4)(14,"label",5),e._uU(15,"Almacenes: (*) "),e.qZA(),e.TgZ(16,"select",8),e.NdJ("ngModelChange",function(a){return t.warehouse_id=a}),e.TgZ(17,"option",9),e._uU(18,"Ninguno"),e.qZA(),e.YNc(19,V,3,2,"ng-container",10),e.qZA()(),e.TgZ(20,"div",4)(21,"label",5),e._uU(22,"Proveedor: (*) "),e.qZA(),e.TgZ(23,"select",11),e.NdJ("ngModelChange",function(a){return t.provider_id=a}),e.TgZ(24,"option",9),e._uU(25,"Ninguno"),e.qZA(),e.YNc(26,z,3,2,"ng-container",10),e.qZA()()(),e.TgZ(27,"div",12)(28,"div",4)(29,"label",5),e._uU(30,"Fecha de Emisi\xf3n: (*) "),e.qZA(),e.TgZ(31,"div",13)(32,"input",14),e.NdJ("ngModelChange",function(a){return t.date_emision=a}),e.qZA()()(),e.TgZ(33,"div",4)(34,"label",5),e._uU(35,"Tipo de comprobante: (*) "),e.qZA(),e.TgZ(36,"select",15),e.NdJ("ngModelChange",function(a){return t.type_comprobant=a}),e.TgZ(37,"option",9),e._uU(38,"Ninguno"),e.qZA(),e.TgZ(39,"option",16),e._uU(40,"FACTURA ELECTR\xd3NICO"),e.qZA(),e.TgZ(41,"option",17),e._uU(42,"NOTA DE CREDITO"),e.qZA(),e.TgZ(43,"option",18),e._uU(44,"NOTA DE DEBITO"),e.qZA(),e.TgZ(45,"option",19),e._uU(46,"RECIBO POR HONARIOS"),e.qZA(),e.TgZ(47,"option",20),e._uU(48,"GUIA DE REMISION"),e.qZA()()(),e.TgZ(49,"div",4)(50,"label",5),e._uU(51,"N\xb0 de Comprobante: (*) "),e.qZA(),e.TgZ(52,"input",21),e.NdJ("ngModelChange",function(a){return t.n_comprobant=a}),e.qZA()(),e.TgZ(53,"div",4)(54,"label",5),e._uU(55,"State: (*) "),e.qZA(),e.TgZ(56,"select",22),e.NdJ("ngModelChange",function(a){return t.state=a}),e.YNc(57,G,5,0,"ng-container",23),e.YNc(58,K,2,0,"option",24),e.YNc(59,W,2,0,"option",25),e.qZA()()(),e.TgZ(60,"div",26)(61,"div",27)(62,"label",28),e._uU(63,"Nota Final:"),e.qZA(),e.TgZ(64,"textarea",29),e.NdJ("ngModelChange",function(a){return t.description=a}),e.qZA()(),e.TgZ(65,"div",27),e.YNc(66,X,2,0,"button",30),e.qZA()(),e.TgZ(67,"div",12)(68,"div",4)(69,"label",5),e._uU(70,"Buscar Producto: (*) "),e.qZA(),e.TgZ(71,"div",31)(72,"i",32),e._UZ(73,"span",33)(74,"span",34),e.qZA(),e.TgZ(75,"input",35),e.NdJ("ngModelChange",function(a){return t.search_product=a})("keyup.enter",function(){return t.listProducts()}),e.qZA()()(),e.TgZ(76,"div",4)(77,"label",5),e._uU(78,"Unidades: (*) "),e.qZA(),e.TgZ(79,"select",36),e.NdJ("ngModelChange",function(a){return t.unit_id=a}),e.TgZ(80,"option",9),e._uU(81,"Ninguno"),e.qZA(),e.YNc(82,ee,3,2,"ng-container",10),e.qZA()(),e.TgZ(83,"div",37)(84,"label",5),e._uU(85,"Precio Unitario: (*) "),e.qZA(),e.TgZ(86,"input",38),e.NdJ("ngModelChange",function(a){return t.price_unit=a}),e.qZA()(),e.TgZ(87,"div",37)(88,"label",5),e._uU(89,"Cantidad Solic.: (*) "),e.qZA(),e.TgZ(90,"input",39),e.NdJ("ngModelChange",function(a){return t.quantity=a}),e.qZA()(),e.TgZ(91,"div",37),e.YNc(92,te,2,0,"button",40),e.qZA()(),e.TgZ(93,"div",12)(94,"div",41)(95,"div",42)(96,"table",43)(97,"thead")(98,"tr",44)(99,"th",45),e._uU(100,"Entrega"),e.qZA(),e.TgZ(101,"th",45),e._uU(102,"Producto"),e.qZA(),e.TgZ(103,"th",46),e._uU(104,"Unidad"),e.qZA(),e.TgZ(105,"th",46),e._uU(106,"Precio Unitario"),e.qZA(),e.TgZ(107,"th",46),e._uU(108,"Cantidad"),e.qZA(),e.TgZ(109,"th",46),e._uU(110,"Total"),e.qZA(),e.TgZ(111,"th",47),e._uU(112,"Actions"),e.qZA()()(),e.TgZ(113,"tbody"),e.YNc(114,re,17,8,"ng-container",10),e.TgZ(115,"tr"),e._UZ(116,"td")(117,"td"),e.TgZ(118,"td")(119,"input",48),e.NdJ("ngModelChange",function(a){return t.importe=a}),e.qZA(),e.TgZ(120,"small"),e._uU(121,"Importe:"),e.qZA()(),e.TgZ(122,"td")(123,"input",49),e.NdJ("ngModelChange",function(a){return t.igv=a}),e.qZA(),e.TgZ(124,"small"),e._uU(125,"Igv:"),e.qZA()(),e.TgZ(126,"td")(127,"input",50),e.NdJ("ngModelChange",function(a){return t.total=a}),e.qZA(),e.TgZ(128,"small"),e._uU(129,"Total:"),e.qZA()()(),e.TgZ(130,"tr"),e._UZ(131,"td"),e.TgZ(132,"td"),e.YNc(133,ae,2,0,"button",30),e.qZA(),e._UZ(134,"td")(135,"td")(136,"td"),e.qZA()()()()()()()()),2&i&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,27,t.isLoading$)),e.xp6(5),e.Q6J("ngModel",t.full_name_user),e.xp6(4),e.Q6J("ngModel",t.sucursal_user),e.xp6(4),e.Q6J("ngModel",t.warehouse_id),e.xp6(3),e.Q6J("ngForOf",t.warehouses),e.xp6(4),e.Q6J("ngModel",t.provider_id),e.xp6(3),e.Q6J("ngForOf",t.providers),e.xp6(6),e.Q6J("ngModel",t.date_emision),e.xp6(4),e.Q6J("ngModel",t.type_comprobant),e.xp6(16),e.Q6J("ngModel",t.n_comprobant),e.xp6(4),e.Q6J("ngModel",t.state),e.xp6(1),e.Q6J("ngIf",t.PURCHASE_SELECTED&&3!=t.PURCHASE_SELECTED.state&&4!=t.PURCHASE_SELECTED.state),e.xp6(1),e.Q6J("ngIf",t.PURCHASE_SELECTED&&3==t.PURCHASE_SELECTED.state),e.xp6(1),e.Q6J("ngIf",t.PURCHASE_SELECTED&&4==t.PURCHASE_SELECTED.state),e.xp6(5),e.Q6J("ngModel",t.description),e.xp6(2),e.Q6J("ngIf",t.PURCHASE_SELECTED&&4!=t.PURCHASE_SELECTED.state),e.xp6(9),e.Q6J("ngModel",t.search_product),e.xp6(4),e.Q6J("ngModel",t.unit_id),e.xp6(3),e.Q6J("ngForOf",t.units),e.xp6(4),e.Q6J("ngModel",t.price_unit),e.xp6(4),e.Q6J("ngModel",t.quantity),e.xp6(2),e.Q6J("ngIf",t.PURCHASE_SELECTED&&4!=t.PURCHASE_SELECTED.state),e.xp6(22),e.Q6J("ngForOf",t.PURCHASE_DETAILS),e.xp6(5),e.Q6J("ngModel",t.importe),e.xp6(4),e.Q6J("ngModel",t.igv),e.xp6(4),e.Q6J("ngModel",t.total),e.xp6(6),e.Q6J("ngIf",t.PURCHASE_SELECTED&&4!=t.PURCHASE_SELECTED.state))},dependencies:[l.sg,l.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On,l.Ov]})}return o})()}]}];let ce=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[f.Bz.forChild(se),f.Bz]})}return o})();var le=d(53);let de=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[l.ez,ce,u.JF,c.u5,_.IJ,c.UX,le.vi,_.bz,_.jF]})}return o})()}}]);
"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[370],{3370:(j,p,c)=>{c.r(p),c.d(p,{ComissionsModule:()=>O});var l=c(6814),h=c(7304),n=c(5879),m=c(9862),A=c(5619),d=c(4716),T=c(6988),f=c(3595);let q=(()=>{class e{http;authservice;isLoading$;isLoadingSubject;constructor(t,a){this.http=t,this.authservice=a,this.isLoadingSubject=new A.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}getCommisionAsesores(t){this.isLoadingSubject.next(!0);let a=new m.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(T.$g+"/comission",t,{headers:a}).pipe((0,d.x)(()=>this.isLoadingSubject.next(!1)))}configAll(){this.isLoadingSubject.next(!0);let t=new m.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(T.$g+"/comission/config",{headers:t}).pipe((0,d.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(a){return new(a||e)(n.LFG(m.eN),n.LFG(f.e8))};static \u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var r=c(6223);function U(e,s){1&e&&n._UZ(0,"span",43)}function C(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"th",41),n._uU(2),n.qZA(),n.BQk()),2&e){const t=s.$implicit;n.xp6(2),n.Oqu(t.name)}}function x(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"th",41),n._uU(2),n.qZA(),n.BQk()),2&e){const t=s.$implicit;n.xp6(2),n.Oqu(t.name)}}function v(e,s){1&e&&(n.ynx(0),n.TgZ(1,"th"),n._uU(2,"Monto"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"%"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"S/."),n.qZA(),n.BQk())}function b(e,s){1&e&&(n.ynx(0),n.TgZ(1,"th"),n._uU(2,"Monto"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"%"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"S/."),n.qZA(),n.BQk())}const _=function(e,s){return{"colum-comission":e,"colum-venta-corta":s}},i=function(e){return{"colum-comission":e}};function J(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"td",46),n._uU(2),n.qZA(),n.TgZ(3,"td",46),n._uU(4),n.qZA(),n.TgZ(5,"td",46),n._uU(6),n.qZA(),n.BQk()),2&e){const t=s.$implicit;n.xp6(1),n.Q6J("ngClass",n.WLB(6,_,t.ganancia>0,t.total_ventas_x_categoria>0&&0==t.ganancia)),n.xp6(1),n.hij("",t.total_ventas_x_categoria," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(9,i,t.ganancia>0)),n.xp6(1),n.hij("",t.percentage," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(11,i,t.ganancia>0)),n.xp6(1),n.hij("",t.ganancia," PEN")}}function M(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"td",46),n._uU(2),n.qZA(),n.TgZ(3,"td",46),n._uU(4),n.qZA(),n.TgZ(5,"td",46),n._uU(6),n.qZA(),n.BQk()),2&e){const t=s.$implicit;n.xp6(1),n.Q6J("ngClass",n.WLB(6,_,t.ganancia>0,t.total_ventas_x_segment_client>0&&0==t.ganancia)),n.xp6(1),n.hij("",t.total_ventas_x_segment_client," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(9,i,t.ganancia>0)),n.xp6(1),n.hij("",t.percentage," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(11,i,t.ganancia>0)),n.xp6(1),n.hij("",t.ganancia," PEN")}}function S(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"tr",44)(2,"td"),n._uU(3),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td",45),n._uU(7),n.qZA(),n.TgZ(8,"td",46),n._uU(9),n.qZA(),n.TgZ(10,"td",46),n._uU(11),n.qZA(),n.YNc(12,J,7,13,"ng-container",40),n.YNc(13,M,7,13,"ng-container",40),n.TgZ(14,"td",46),n._uU(15),n.qZA(),n.TgZ(16,"td",46),n._uU(17),n.qZA(),n.TgZ(18,"td",46),n._uU(19),n.qZA(),n.TgZ(20,"td",46),n._uU(21),n.qZA(),n.TgZ(22,"td",46),n._uU(23),n.qZA(),n.TgZ(24,"td",46),n._uU(25),n.qZA(),n.TgZ(26,"td",46),n._uU(27),n.qZA(),n.TgZ(28,"td",46),n._uU(29),n.qZA(),n.TgZ(30,"td",46),n._uU(31),n.qZA(),n.TgZ(32,"td",46),n._uU(33),n.qZA(),n.TgZ(34,"td",46),n._uU(35),n.qZA(),n.TgZ(36,"td",46),n._uU(37),n.qZA(),n.TgZ(38,"td",46),n._uU(39),n.qZA(),n.TgZ(40,"td",46),n._uU(41),n.qZA(),n.TgZ(42,"td",46),n._uU(43),n.qZA(),n.TgZ(44,"td",47),n._uU(45),n.qZA()(),n.BQk()),2&e){const t=s.$implicit;n.xp6(3),n.Oqu(t.full_name),n.xp6(2),n.Oqu(t.posicion),n.xp6(2),n.hij("",t.total_ventas," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(40,i,t.ganancia_posicion>0)),n.xp6(1),n.hij("",t.ganancia_posicion," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(42,i,t.ganancia_posicion>0)),n.xp6(1),n.hij("",t.percentage_posicion," %"),n.xp6(1),n.Q6J("ngForOf",t.categorie_comission),n.xp6(1),n.Q6J("ngForOf",t.segment_client_comission),n.xp6(1),n.Q6J("ngClass",n.WLB(44,_,t.ganancia_semana_1>0,t.total_ventas_semana_1>0&&0==t.ganancia_semana_1)),n.xp6(1),n.hij("",t.total_ventas_semana_1," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(47,i,t.ganancia_semana_1>0)),n.xp6(1),n.hij("",t.percentage_semana_1," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(49,i,t.ganancia_semana_1>0)),n.xp6(1),n.hij("",t.ganancia_semana_1," PEN"),n.xp6(1),n.Q6J("ngClass",n.WLB(51,_,t.ganancia_semana_2>0,t.total_ventas_semana_2>0&&0==t.ganancia_semana_2)),n.xp6(1),n.hij("",t.total_ventas_semana_2," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(54,i,t.ganancia_semana_2>0)),n.xp6(1),n.hij("",t.percentage_semana_2," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(56,i,t.ganancia_semana_2>0)),n.xp6(1),n.hij("",t.ganancia_semana_2," PEN"),n.xp6(1),n.Q6J("ngClass",n.WLB(58,_,t.ganancia_semana_3>0,t.total_ventas_semana_3>0&&0==t.ganancia_semana_3)),n.xp6(1),n.hij("",t.total_ventas_semana_3," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(61,i,t.ganancia_semana_3>0)),n.xp6(1),n.hij("",t.percentage_semana_3," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(63,i,t.ganancia_semana_3>0)),n.xp6(1),n.hij("",t.ganancia_semana_3," PEN"),n.xp6(1),n.Q6J("ngClass",n.WLB(65,_,t.ganancia_semana_4>0,t.total_ventas_semana_4>0&&0==t.ganancia_semana_4)),n.xp6(1),n.hij("",t.total_ventas_semana_4," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(68,i,t.ganancia_semana_4>0)),n.xp6(1),n.hij("",t.percentage_semana_4," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(70,i,t.ganancia_semana_4>0)),n.xp6(1),n.hij("",t.ganancia_semana_4," PEN"),n.xp6(1),n.Q6J("ngClass",n.WLB(72,_,t.ganancia_x_fecha_de_verificacio>0,t.total_ventas_x_fecha_de_verificacion>0&&0==t.ganancia_x_fecha_de_verificacio)),n.xp6(1),n.hij("",t.total_ventas_x_fecha_de_verificacion," PEN"),n.xp6(1),n.Q6J("ngClass",n.VKq(75,i,t.ganancia_x_fecha_de_verificacio>0)),n.xp6(1),n.hij("",t.percentage_x_fecha_de_verificacio," %"),n.xp6(1),n.Q6J("ngClass",n.VKq(77,i,t.ganancia_x_fecha_de_verificacio>0)),n.xp6(1),n.hij("",t.ganancia_x_fecha_de_verificacio," PEN"),n.xp6(2),n.hij("",t.total_ganancia," PEN")}}const Q=[{path:"",component:(()=>{class e{commisionService;isLoading$;categories=[];segment_clients=[];year="";month="";year_current="";month_current="";COMMISSIONS=[];constructor(t){this.commisionService=t}ngOnInit(){this.isLoading$=this.commisionService.isLoading$,this.configAll()}configAll(){this.commisionService.configAll().subscribe(t=>{console.log(t),this.categories=t.categories,this.segment_clients=t.segment_clients,this.year=t.year,this.month=t.month,this.year_current=t.year,this.month_current=t.month,this.getCommisionAsesores()})}getCommisionAsesores(){let t=[];for(const g of this.categories)t.push(g.id);let a=[];for(const g of this.segment_clients)a.push(g.id);this.commisionService.getCommisionAsesores({year:this.year,month:this.month,categories:t,segment_clients:a}).subscribe(g=>{console.log(g),this.COMMISSIONS=g.asesores_comisiones})}reset(){this.year=this.year_current,this.month=this.month_current,this.getCommisionAsesores()}static \u0275fac=function(a){return new(a||e)(n.Y36(q))};static \u0275cmp=n.Xpm({type:e,selectors:[["app-comissions"]],decls:133,vars:12,consts:[[1,"card"],[1,"card-body"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"row","align-items-center","py-4"],[1,"col-3"],["name","year","placeholder","Filtrar por A\xf1o",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","2023"],["value","2024"],["value","2025"],["value","2026"],[1,"form-text","text-muted"],["name","month","placeholder","Filtrar por Mes",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],[1,"col-2","d-flex"],[1,"btn","btn-primary","btn-sm","mx-1",3,"click"],[1,"ki-duotone","ki-magnifier","fs-2"],[1,"path1"],[1,"path2"],[1,"btn","btn-dark","btn-sm",3,"click"],[1,"ki-duotone","ki-loading","fs-2"],["id","kt_customers_table_wrapper",1,"dt-container","dt-bootstrap5","dt-empty-footer"],["id","",1,"table-responsive"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-dark","fw-bold","fs-7","text-uppercase","gs-0"],["rowspan","3"],["rowspan","2"],["colspan","2","rowspan","2"],["colspan","12"],["colspan","3","rowspan","2"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"fw-semibold","text-dark"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"row-table",2,"border-bottom","0.1rem solid !important"],[1,"colum-venta-total"],[3,"ngClass"],[1,"colum-comision-total"]],template:function(a,o){1&a&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,U,1,0,"span",2),n.ALo(3,"async"),n.TgZ(4,"div",3)(5,"div",4)(6,"select",5),n.NdJ("ngModelChange",function(Z){return o.year=Z}),n.TgZ(7,"option",6),n._uU(8,"2023"),n.qZA(),n.TgZ(9,"option",7),n._uU(10,"2024"),n.qZA(),n.TgZ(11,"option",8),n._uU(12,"2025"),n.qZA(),n.TgZ(13,"option",9),n._uU(14,"2026"),n.qZA()(),n.TgZ(15,"small",10)(16,"b"),n._uU(17,"Filtrar"),n.qZA(),n._uU(18," por A\xf1o"),n.qZA()(),n.TgZ(19,"div",4)(20,"select",11),n.NdJ("ngModelChange",function(Z){return o.month=Z}),n.TgZ(21,"option",12),n._uU(22,"Enero"),n.qZA(),n.TgZ(23,"option",13),n._uU(24,"Febrero"),n.qZA(),n.TgZ(25,"option",14),n._uU(26,"Marzo"),n.qZA(),n.TgZ(27,"option",15),n._uU(28,"Abril"),n.qZA(),n.TgZ(29,"option",16),n._uU(30,"Mayo"),n.qZA(),n.TgZ(31,"option",17),n._uU(32,"Junio"),n.qZA(),n.TgZ(33,"option",18),n._uU(34,"Julio"),n.qZA(),n.TgZ(35,"option",19),n._uU(36,"Agosto"),n.qZA(),n.TgZ(37,"option",20),n._uU(38,"Septiembre"),n.qZA(),n.TgZ(39,"option",21),n._uU(40,"Octubre"),n.qZA(),n.TgZ(41,"option",22),n._uU(42,"Noviembre"),n.qZA(),n.TgZ(43,"option",23),n._uU(44,"Diciembre"),n.qZA()(),n.TgZ(45,"small",10)(46,"b"),n._uU(47,"Filtrar"),n.qZA(),n._uU(48," por Mes"),n.qZA()(),n.TgZ(49,"div",24)(50,"button",25),n.NdJ("click",function(){return o.getCommisionAsesores()}),n.TgZ(51,"i",26),n._UZ(52,"span",27)(53,"span",28),n.qZA()(),n.TgZ(54,"button",29),n.NdJ("click",function(){return o.reset()}),n.TgZ(55,"i",30),n._UZ(56,"span",27)(57,"span",28),n.qZA()()()(),n.TgZ(58,"div",31)(59,"div",32)(60,"table",33)(61,"thead")(62,"tr",34)(63,"th",35),n._uU(64,"Asesor"),n.qZA(),n.TgZ(65,"th",35),n._uU(66,"Posici\xf3n"),n.qZA(),n.TgZ(67,"th",36),n._uU(68,"Venta Total"),n.qZA(),n.TgZ(69,"th",37),n._uU(70,"Comisi\xf3n"),n.qZA(),n.TgZ(71,"th"),n._uU(72,"Categor\xeda"),n.qZA(),n.TgZ(73,"th"),n._uU(74,"Segmento de cliente"),n.qZA(),n.TgZ(75,"th",38),n._uU(76,"Semana"),n.qZA(),n.TgZ(77,"th",39),n._uU(78,"V. Fecha de verificaci\xf3n"),n.qZA(),n.TgZ(79,"th",35),n._uU(80,"Comisi\xf3n Total"),n.qZA()(),n.TgZ(81,"tr",34),n.YNc(82,C,3,1,"ng-container",40),n.YNc(83,x,3,1,"ng-container",40),n.TgZ(84,"th",41),n._uU(85,"Semana 1"),n.qZA(),n.TgZ(86,"th",41),n._uU(87,"Semana 2"),n.qZA(),n.TgZ(88,"th",41),n._uU(89,"Semana 3"),n.qZA(),n.TgZ(90,"th",41),n._uU(91,"Semana 4"),n.qZA()(),n.TgZ(92,"tr",34)(93,"th"),n._uU(94,"S/."),n.qZA(),n.TgZ(95,"th"),n._uU(96,"S/."),n.qZA(),n.TgZ(97,"th"),n._uU(98,"%"),n.qZA(),n.YNc(99,v,7,0,"ng-container",40),n.YNc(100,b,7,0,"ng-container",40),n.TgZ(101,"th"),n._uU(102,"Monto"),n.qZA(),n.TgZ(103,"th"),n._uU(104,"%"),n.qZA(),n.TgZ(105,"th"),n._uU(106,"S/."),n.qZA(),n.TgZ(107,"th"),n._uU(108,"Monto"),n.qZA(),n.TgZ(109,"th"),n._uU(110,"%"),n.qZA(),n.TgZ(111,"th"),n._uU(112,"S/."),n.qZA(),n.TgZ(113,"th"),n._uU(114,"Monto"),n.qZA(),n.TgZ(115,"th"),n._uU(116,"%"),n.qZA(),n.TgZ(117,"th"),n._uU(118,"S/."),n.qZA(),n.TgZ(119,"th"),n._uU(120,"Monto"),n.qZA(),n.TgZ(121,"th"),n._uU(122,"%"),n.qZA(),n.TgZ(123,"th"),n._uU(124,"S/."),n.qZA(),n.TgZ(125,"th"),n._uU(126,"Monto"),n.qZA(),n.TgZ(127,"th"),n._uU(128,"%"),n.qZA(),n.TgZ(129,"th"),n._uU(130,"S/."),n.qZA()()(),n.TgZ(131,"tbody",42),n.YNc(132,S,46,79,"ng-container",40),n.qZA()()()()()()),2&a&&(n.xp6(2),n.Q6J("ngIf",n.lcZ(3,10,o.isLoading$)),n.xp6(4),n.Q6J("ngModel",o.year),n.xp6(14),n.Q6J("ngModel",o.month),n.xp6(51),n.uIk("colspan",3*o.categories.length),n.xp6(2),n.uIk("colspan",3*o.segment_clients.length),n.xp6(9),n.Q6J("ngForOf",o.categories),n.xp6(1),n.Q6J("ngForOf",o.segment_clients),n.xp6(16),n.Q6J("ngForOf",o.categories),n.xp6(1),n.Q6J("ngForOf",o.segment_clients),n.xp6(32),n.Q6J("ngForOf",o.COMMISSIONS))},dependencies:[l.mk,l.sg,l.O5,r.YN,r.Kr,r.EJ,r.JJ,r.On,l.Ov],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black!important;text-align:center;padding:5px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.row-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-wrap:nowrap}.colum-comission[_ngcontent-%COMP%]{background-color:#c4ffdc}.colum-venta-total[_ngcontent-%COMP%]{background-color:#c4e4ff}.colum-comision-total[_ngcontent-%COMP%]{background-color:#ffeac4}.colum-venta-corta[_ngcontent-%COMP%]{background-color:#d1c4ff}"]})}return e})()}];let N=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=n.oAB({type:e});static \u0275inj=n.cJS({imports:[h.Bz.forChild(Q),h.Bz]})}return e})();var u=c(1274),y=c(53);let O=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=n.oAB({type:e});static \u0275inj=n.cJS({imports:[l.ez,N,m.JF,r.u5,u.IJ,r.UX,y.vi,u.bz,u.jF]})}return e})()}}]);
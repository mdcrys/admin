"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[855],{9855:(F,u,d)=>{d.r(u),d.d(u,{EmpresasModule:()=>k});var m=d(6814),g=d(7304),e=d(5879);let E=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=e.Xpm({type:r,selectors:[["app-empresas"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[g.lC]})}return r})();var h=d(6988),p=d(1274),c=d(4594),_=d(2425),s=d(6223);function f(r,l){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",41),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("src",n.LOGO_PREVISUALIZA,e.LSH)}}function Z(r,l){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",51)(2,"input",52),e.NdJ("click",function(){const a=e.CHM(n).$implicit,i=e.oxw(3);return e.KtG(i.addPermission(a.permiso))}),e.qZA(),e.TgZ(3,"label",53),e._uU(4),e.qZA()(),e.BQk()}if(2&r){const n=l.$implicit,t=e.oxw().$implicit;e.xp6(2),e.hYB("id","permiso-",t.name,"-",n.permiso,""),e.xp6(1),e.Q6J("for","permiso-"+t.name+"-"+n.permiso),e.xp6(1),e.hij(" ",n.name," ")}}function b(r,l){if(1&r&&(e.TgZ(0,"div",46)(1,"div",47)(2,"div",48),e._uU(3),e.qZA(),e.TgZ(4,"div",49),e.YNc(5,Z,5,4,"ng-container",50),e.qZA()()()),2&r){const n=l.$implicit;e.xp6(3),e.hij(" ",n.name," "),e.xp6(2),e.Q6J("ngForOf",n.permisos)}}function C(r,l){if(1&r&&(e.TgZ(0,"div",42)(1,"label",14),e._uU(2,"Selecciona sus permisos: "),e.qZA(),e.TgZ(3,"div",43)(4,"div",44),e.YNc(5,b,6,2,"div",45),e.qZA()()()),2&r){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.SIDEBAR)}}function A(r,l){1&r&&e._UZ(0,"span",54)}const T=function(r){return{"rotate-180":r}};let v=(()=>{class r{modal;empresaService;toast;EmpresaC=new e.vpe;nombre="";ruc="";telefono="";correo="";direccion="";admin_nombre="";admin_apellido="";admin_correo="";admin_password="";admin_password_confirm="";isLoading;LOGO_EMPRESA;LOGO_PREVISUALIZA;SIDEBAR=h.jy;permisions=[];mostrarPermisos=!1;constructor(n,t,o){this.modal=n,this.empresaService=t,this.toast=o}togglePermisos(){this.mostrarPermisos=!this.mostrarPermisos}addPermission(n){let t=this.permisions.findIndex(o=>o==n);-1!=t?this.permisions.splice(t,1):this.permisions.push(n),console.log(this.permisions)}ngOnInit(){}processFile(n){if(n.target.files[0].type.indexOf("image")<0)return void this.toast.warning("WARN","El archivo no es una imagen");this.LOGO_EMPRESA=n.target.files[0];let t=new FileReader;t.readAsDataURL(this.LOGO_EMPRESA),t.onloadend=()=>this.LOGO_PREVISUALIZA=t.result}store(){if(!this.nombre)return void this.toast.error("Validaci\xf3n","El nombre de la empresa es requerido");if(!this.LOGO_EMPRESA)return void this.toast.error("Validaci\xf3n","El logo es requerido");if(!this.admin_nombre)return void this.toast.error("Validaci\xf3n","El nombre del administrador es requerido");if(!this.admin_apellido)return void this.toast.error("Validaci\xf3n","El apellido del administrador es requerido");if(!this.admin_correo)return void this.toast.error("Validaci\xf3n","El correo del administrador es requerido");if(!this.admin_password)return void this.toast.error("Validaci\xf3n","La contrase\xf1a del administrador es requerida");if(this.admin_password!==this.admin_password_confirm)return void this.toast.error("Validaci\xf3n","Las contrase\xf1as no coinciden");const n=new FormData;n.append("nombre_empresa",this.nombre),n.append("ruc_empresa",this.ruc||""),n.append("telefono",this.telefono||""),n.append("correo",this.correo||""),n.append("logo",this.LOGO_EMPRESA),n.append("admin_nombre",this.admin_nombre),n.append("admin_apellido",this.admin_apellido),n.append("admin_correo",this.admin_correo),n.append("admin_password",this.admin_password),n.append("permisos",JSON.stringify(this.permisions)),this.empresaService.registerEmpresa(n).subscribe(t=>{403===t.message?this.toast.error("Validaci\xf3n",t.message_text):(this.toast.success("\xc9xito","La empresa se registr\xf3 correctamente"),this.EmpresaC.emit(t.empresa),this.modal.close())})}static \u0275fac=function(t){return new(t||r)(e.Y36(p.Kz),e.Y36(c.P),e.Y36(_._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-create-empresa"]],outputs:{EmpresaC:"EmpresaC"},decls:88,vars:18,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","my-7"],["id","kt_modal_add_empresa_form","action","#",1,"form"],[1,"card","p-5"],[1,"row"],[1,"col-md-6"],[1,"fv-row","mb-4"],[1,"required","fw-bold","fs-6","mb-2"],[1,"custom-file","mb-2"],["type","file","id","customFile","accept",".jpeg, .bmp, .jpg, .png, .gif, .webp",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"],[4,"ngIf"],["type","text","name","nombre","placeholder","Nombre de la empresa",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","ruc","placeholder","RUC",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"fw-bold","fs-6","mb-2"],["type","email","name","correo","placeholder","Correo",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","telefono","placeholder","Tel\xe9fono",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","direccion","placeholder","Direcci\xf3n",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"my-10","border","border-primary","border-2","opacity-50"],[1,"fw-bolder","mb-5","text-center","text-primary"],["type","text","name","admin_nombre","placeholder","Nombre",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","admin_apellido","placeholder","Apellido",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","email","name","admin_correo","placeholder","Correo electr\xf3nico",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","password","name","admin_password","placeholder","Contrase\xf1a",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","password","name","admin_password_confirm","placeholder","Confirmar contrase\xf1a",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"fw-bolder","mb-5","text-center","text-primary",2,"cursor","pointer",3,"click"],[2,"transition","0.3s",3,"ngClass"],[1,"mb-4"],["class","fv-row mb-7",4,"ngIf"],[1,"text-center","pt-10"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],["alt","Vista previa del logo",2,"height","100px",3,"src"],[1,"fv-row","mb-7"],[1,"table-responsive","w-100"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","h-100","shadow-sm",2,"font-size","0.9rem","border-radius","0.5rem"],[1,"card-header","bg-primary","text-white","fw-bold",2,"font-size","1rem","padding","0.5rem 1rem"],[1,"card-body","d-flex","flex-column","gap-2",2,"padding","0.5rem 1rem","background-color","#f8f9fa"],[4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","click"],[1,"form-check-label",2,"margin-left","0.25rem",3,"for"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Agregar Empresa"),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return o.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"label",14),e._uU(16,"Logo de la empresa:"),e.qZA(),e.TgZ(17,"div",15)(18,"input",16),e.NdJ("change",function(i){return o.processFile(i)}),e.qZA(),e.TgZ(19,"label",17),e._uU(20,"Seleccionar archivo"),e.qZA()(),e.YNc(21,f,2,1,"div",18),e.qZA(),e.TgZ(22,"div",13)(23,"label",14),e._uU(24,"Nombre de la empresa:"),e.qZA(),e.TgZ(25,"input",19),e.NdJ("ngModelChange",function(i){return o.nombre=i}),e.qZA()(),e.TgZ(26,"div",13)(27,"label",14),e._uU(28,"RUC:"),e.qZA(),e.TgZ(29,"input",20),e.NdJ("ngModelChange",function(i){return o.ruc=i}),e.qZA()()(),e.TgZ(30,"div",12)(31,"div",13)(32,"label",21),e._uU(33,"Correo:"),e.qZA(),e.TgZ(34,"input",22),e.NdJ("ngModelChange",function(i){return o.correo=i}),e.qZA()(),e.TgZ(35,"div",13)(36,"label",21),e._uU(37,"Tel\xe9fono:"),e.qZA(),e.TgZ(38,"input",23),e.NdJ("ngModelChange",function(i){return o.telefono=i}),e.qZA()(),e.TgZ(39,"div",13)(40,"label",21),e._uU(41,"Direcci\xf3n:"),e.qZA(),e.TgZ(42,"input",24),e.NdJ("ngModelChange",function(i){return o.direccion=i}),e.qZA()()()()(),e._UZ(43,"hr",25),e.TgZ(44,"h4",26),e._uU(45,"Datos para el Administrador de la Empresa"),e.qZA(),e.TgZ(46,"div",10)(47,"div",11)(48,"div",12)(49,"div",13)(50,"label",14),e._uU(51,"Nombre:"),e.qZA(),e.TgZ(52,"input",27),e.NdJ("ngModelChange",function(i){return o.admin_nombre=i}),e.qZA()(),e.TgZ(53,"div",13)(54,"label",14),e._uU(55,"Apellido:"),e.qZA(),e.TgZ(56,"input",28),e.NdJ("ngModelChange",function(i){return o.admin_apellido=i}),e.qZA()()(),e.TgZ(57,"div",12)(58,"div",13)(59,"label",14),e._uU(60,"Correo electr\xf3nico:"),e.qZA(),e.TgZ(61,"input",29),e.NdJ("ngModelChange",function(i){return o.admin_correo=i}),e.qZA()(),e.TgZ(62,"div",13)(63,"label",14),e._uU(64,"Contrase\xf1a:"),e.qZA(),e.TgZ(65,"input",30),e.NdJ("ngModelChange",function(i){return o.admin_password=i}),e.qZA()(),e.TgZ(66,"div",13)(67,"label",14),e._uU(68,"Confirmar contrase\xf1a:"),e.qZA(),e.TgZ(69,"input",31),e.NdJ("ngModelChange",function(i){return o.admin_password_confirm=i}),e.qZA()()()()(),e._UZ(70,"hr",25),e.TgZ(71,"h4",26),e._uU(72,"Configurar Correo de salida de Empresa"),e.qZA(),e._UZ(73,"hr",25),e.TgZ(74,"h4",32),e.NdJ("click",function(){return o.togglePermisos()}),e._uU(75," Asignar Permisos "),e.TgZ(76,"span",33),e._uU(77," \u25bc "),e.qZA()(),e._UZ(78,"hr",34),e.YNc(79,C,6,1,"div",35),e.TgZ(80,"div",36)(81,"button",37),e.NdJ("click",function(){return o.modal.dismiss()}),e._uU(82,"Cerrar"),e.qZA(),e.TgZ(83,"button",38),e.NdJ("click",function(){return o.store()}),e.TgZ(84,"span",39),e._uU(85,"Registrar"),e.qZA(),e.YNc(86,A,1,0,"span",40),e.ALo(87,"async"),e.qZA()()()()()),2&t&&(e.xp6(21),e.Q6J("ngIf",o.LOGO_PREVISUALIZA),e.xp6(4),e.Q6J("ngModel",o.nombre),e.xp6(4),e.Q6J("ngModel",o.ruc),e.xp6(5),e.Q6J("ngModel",o.correo),e.xp6(4),e.Q6J("ngModel",o.telefono),e.xp6(4),e.Q6J("ngModel",o.direccion),e.xp6(10),e.Q6J("ngModel",o.admin_nombre),e.xp6(4),e.Q6J("ngModel",o.admin_apellido),e.xp6(5),e.Q6J("ngModel",o.admin_correo),e.xp6(4),e.Q6J("ngModel",o.admin_password),e.xp6(4),e.Q6J("ngModel",o.admin_password_confirm),e.xp6(7),e.Q6J("ngClass",e.VKq(16,T,o.mostrarPermisos)),e.xp6(3),e.Q6J("ngIf",o.mostrarPermisos),e.xp6(7),e.Q6J("ngIf",e.lcZ(87,14,o.isLoading)))},dependencies:[m.mk,m.sg,m.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,m.Ov]})}return r})();function M(r,l){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",43),e.qZA()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("src",n.IMAGEN_PREVISUALIZA,e.LSH)}}function S(r,l){1&r&&e._UZ(0,"span",44)}let y=(()=>{class r{modal;empresaService;toast;EmpresaE=new e.vpe;EMPRESA_SELECTED;nombre="";ruc="";telefono="";correo="";direccion="";estado=1;IMAGEN_EMPRESA;IMAGEN_PREVISUALIZA;admin_nombre="";admin_apellido="";admin_correo="";admin_password="";admin_password_confirm="";isLoading;constructor(n,t,o){this.modal=n,this.empresaService=t,this.toast=o}ngOnInit(){console.log("Datos recibidos para editar:",this.EMPRESA_SELECTED),this.nombre=this.EMPRESA_SELECTED.nombre_empresa,this.ruc=this.EMPRESA_SELECTED.ruc_empresa,this.telefono=this.EMPRESA_SELECTED.telefono,this.correo=this.EMPRESA_SELECTED.correo,this.direccion=this.EMPRESA_SELECTED.direccion||"",this.estado=this.EMPRESA_SELECTED.estado,this.IMAGEN_PREVISUALIZA=this.EMPRESA_SELECTED.imagen,this.EMPRESA_SELECTED.admin&&(this.admin_nombre=this.EMPRESA_SELECTED.admin.nombre||"",this.admin_apellido=this.EMPRESA_SELECTED.admin.apellido||"",this.admin_correo=this.EMPRESA_SELECTED.admin.correo||"")}processFile(n){if(n.target.files[0].type.indexOf("image")<0)return void this.toast.warning("Advertencia","El archivo no es una imagen");this.IMAGEN_EMPRESA=n.target.files[0];const t=new FileReader;t.readAsDataURL(this.IMAGEN_EMPRESA),t.onloadend=()=>this.IMAGEN_PREVISUALIZA=t.result}store(){if(!this.nombre)return void this.toast.error("Validaci\xf3n","El nombre es requerido");if(this.admin_password!==this.admin_password_confirm)return void this.toast.error("Validaci\xf3n","Las contrase\xf1as no coinciden");const n=new FormData;n.append("nombre_empresa",this.nombre),n.append("ruc_empresa",this.ruc),n.append("telefono",this.telefono),n.append("correo",this.correo),n.append("direccion",this.direccion),n.append("estado",this.estado.toString()),this.IMAGEN_EMPRESA&&n.append("imagen_empresa",this.IMAGEN_EMPRESA),n.append("admin_nombre",this.admin_nombre),n.append("admin_apellido",this.admin_apellido),n.append("admin_correo",this.admin_correo),n.append("admin_password",this.admin_password),this.empresaService.updateEmpresa(this.EMPRESA_SELECTED.id,n).subscribe(t=>{403===t.message?this.toast.error("Validaci\xf3n",t.message_text):(this.toast.success("\xc9xito","La empresa se actualiz\xf3 correctamente"),this.EmpresaE.emit(t.empresa),this.modal.close())})}static \u0275fac=function(t){return new(t||r)(e.Y36(p.Kz),e.Y36(c.P),e.Y36(_._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-edit-empresa"]],inputs:{EMPRESA_SELECTED:"EMPRESA_SELECTED"},outputs:{EmpresaE:"EmpresaE"},decls:91,vars:16,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],[1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","my-7"],["id","kt_modal_edit_empresa_form","action","#",1,"form"],[1,"card","p-5"],[1,"row"],[1,"col-md-6"],[1,"fv-row","mb-4"],[1,"fw-bold","fs-6","mb-2"],[1,"custom-file","mb-2"],["type","file","id","customFileEmpresa","accept",".jpeg,.bmp,.jpg,.png,.gif,.webp",1,"custom-file-input",3,"change"],["for","customFileEmpresa",1,"custom-file-label"],[4,"ngIf"],[1,"required","fw-bold","fs-6","mb-2"],["type","text","name","nombre","placeholder","Nombre",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","ruc","placeholder","RUC",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","email","name","correo","placeholder","Correo",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","telefono","placeholder","Tel\xe9fono",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","name","direccion","placeholder","Direcci\xf3n",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["name","estado",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","1"],["value","2"],[1,"text-center","my-6"],[1,"fw-bold","mb-4"],[1,"col-md-6","fv-row","mb-4"],["type","text","placeholder","Nombre del administrador","name","admin_nombre",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","text","placeholder","Apellido del administrador","name","admin_apellido",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","email","placeholder","Correo electr\xf3nico","name","admin_correo",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a","name","admin_password",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","password","placeholder","Confirmar contrase\xf1a","name","admin_password_confirm",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"my-10","border","border-primary","border-2","opacity-50"],[1,"fw-bolder","mb-5","text-center","text-primary"],[1,"text-center","pt-10"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],["alt","Vista previa del logo",2,"height","100px",3,"src"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return o.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"label",14),e._uU(16,"Logo de la empresa:"),e.qZA(),e.TgZ(17,"div",15)(18,"input",16),e.NdJ("change",function(i){return o.processFile(i)}),e.qZA(),e.TgZ(19,"label",17),e._uU(20,"Elegir archivo"),e.qZA()(),e.YNc(21,M,2,1,"div",18),e.qZA(),e.TgZ(22,"div",13)(23,"label",19),e._uU(24,"Nombre de la empresa:"),e.qZA(),e.TgZ(25,"input",20),e.NdJ("ngModelChange",function(i){return o.nombre=i}),e.qZA()(),e.TgZ(26,"div",13)(27,"label",14),e._uU(28,"RUC:"),e.qZA(),e.TgZ(29,"input",21),e.NdJ("ngModelChange",function(i){return o.ruc=i}),e.qZA()()(),e.TgZ(30,"div",12)(31,"div",13)(32,"label",14),e._uU(33,"Correo:"),e.qZA(),e.TgZ(34,"input",22),e.NdJ("ngModelChange",function(i){return o.correo=i}),e.qZA()(),e.TgZ(35,"div",13)(36,"label",14),e._uU(37,"Tel\xe9fono:"),e.qZA(),e.TgZ(38,"input",23),e.NdJ("ngModelChange",function(i){return o.telefono=i}),e.qZA()(),e.TgZ(39,"div",13)(40,"label",14),e._uU(41,"Direcci\xf3n:"),e.qZA(),e.TgZ(42,"input",24),e.NdJ("ngModelChange",function(i){return o.direccion=i}),e.qZA()(),e.TgZ(43,"div",13)(44,"label",19),e._uU(45,"Estado:"),e.qZA(),e.TgZ(46,"select",25),e.NdJ("ngModelChange",function(i){return o.estado=i}),e.TgZ(47,"option",26),e._uU(48,"Activo"),e.qZA(),e.TgZ(49,"option",27),e._uU(50,"Inactivo"),e.qZA()()()()()(),e.TgZ(51,"div",28),e._UZ(52,"hr"),e.TgZ(53,"h5",29),e._uU(54,"Datos del Administrador de la Empresa"),e.qZA()(),e.TgZ(55,"div",10)(56,"div",11)(57,"div",30)(58,"label",19),e._uU(59,"Nombre:"),e.qZA(),e.TgZ(60,"input",31),e.NdJ("ngModelChange",function(i){return o.admin_nombre=i}),e.qZA()(),e.TgZ(61,"div",30)(62,"label",19),e._uU(63,"Apellido:"),e.qZA(),e.TgZ(64,"input",32),e.NdJ("ngModelChange",function(i){return o.admin_apellido=i}),e.qZA()(),e.TgZ(65,"div",30)(66,"label",19),e._uU(67,"Correo:"),e.qZA(),e.TgZ(68,"input",33),e.NdJ("ngModelChange",function(i){return o.admin_correo=i}),e.qZA()(),e.TgZ(69,"div",30)(70,"label",19),e._uU(71,"Contrase\xf1a:"),e.qZA(),e.TgZ(72,"input",34),e.NdJ("ngModelChange",function(i){return o.admin_password=i}),e.qZA()(),e.TgZ(73,"div",30)(74,"label",19),e._uU(75,"Confirmar contrase\xf1a:"),e.qZA(),e.TgZ(76,"input",35),e.NdJ("ngModelChange",function(i){return o.admin_password_confirm=i}),e.qZA()()()(),e._UZ(77,"hr",36),e.TgZ(78,"h4",37),e._uU(79,"Configurar Correo de salida de Empresa"),e.qZA(),e._UZ(80,"hr",36),e.TgZ(81,"h4",37),e._uU(82,"Asignar Permisos"),e.qZA(),e.TgZ(83,"div",38)(84,"button",39),e.NdJ("click",function(){return o.modal.dismiss()}),e._uU(85,"Cerrar"),e.qZA(),e.TgZ(86,"button",40),e.NdJ("click",function(){return o.store()}),e.TgZ(87,"span",41),e._uU(88,"Editar"),e.qZA(),e.YNc(89,S,1,0,"span",42),e.ALo(90,"async"),e.qZA()()()()()),2&t&&(e.xp6(3),e.hij("Editar Empresa: ",o.EMPRESA_SELECTED.nombre,""),e.xp6(18),e.Q6J("ngIf",o.IMAGEN_PREVISUALIZA),e.xp6(4),e.Q6J("ngModel",o.nombre),e.xp6(4),e.Q6J("ngModel",o.ruc),e.xp6(5),e.Q6J("ngModel",o.correo),e.xp6(4),e.Q6J("ngModel",o.telefono),e.xp6(4),e.Q6J("ngModel",o.direccion),e.xp6(4),e.Q6J("ngModel",o.estado),e.xp6(14),e.Q6J("ngModel",o.admin_nombre),e.xp6(4),e.Q6J("ngModel",o.admin_apellido),e.xp6(4),e.Q6J("ngModel",o.admin_correo),e.xp6(4),e.Q6J("ngModel",o.admin_password),e.xp6(4),e.Q6J("ngModel",o.admin_password_confirm),e.xp6(13),e.Q6J("ngIf",e.lcZ(90,14,o.isLoading)))},dependencies:[m.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.F,m.Ov]})}return r})();function q(r,l){1&r&&e._UZ(0,"span",15)}let U=(()=>{class r{modal;empresaService;toast;EmpresaD=new e.vpe;EMPRESA_SELECTED;isLoading;constructor(n,t,o){this.modal=n,this.empresaService=t,this.toast=o}ngOnInit(){}delete(){this.empresaService.deleteEmpresa(this.EMPRESA_SELECTED.id).subscribe(n=>{console.log(n),403==n.message?this.toast.error("Validaci\xf3n",n.message_text):(this.toast.success("\xc9xito","La empresa se elimin\xf3 correctamente"),this.EmpresaD.emit(n.message),this.modal.close())})}static \u0275fac=function(t){return new(t||r)(e.Y36(p.Kz),e.Y36(c.P),e.Y36(_._W))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-delete-empresa"]],inputs:{EMPRESA_SELECTED:"EMPRESA_SELECTED"},outputs:{EmpresaD:"EmpresaD"},decls:21,vars:4,consts:[[1,"modal-content"],["id","kt_modal_add_user_header",1,"modal-header"],[1,"fw-bolder"],["data-kt-users-modal-action","close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_modal_delete_empresa_form","action","#",1,"form"],[1,"text-center","pt-15"],["type","reset",1,"btn","btn-light","me-3",3,"click"],["type","button","data-kt-users-modal-action","submit",1,"btn","btn-danger",3,"click"],[1,"indicator-label"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return o.modal.dismiss()}),e.TgZ(5,"span",4),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"rect",6)(8,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"p"),e._uU(12," \xbfEST\xc1S SEGURO DE ELIMINAR ESTA EMPRESA? "),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return o.modal.dismiss()}),e._uU(15,"Cerrar"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return o.delete()}),e.TgZ(17,"span",13),e._uU(18,"ELIMINAR"),e.qZA(),e.YNc(19,q,1,0,"span",14),e.ALo(20,"async"),e.qZA()()()()()),2&t&&(e.xp6(3),e.hij("Eliminar Empresa: #",o.EMPRESA_SELECTED.nombre,""),e.xp6(16),e.Q6J("ngIf",e.lcZ(20,2,o.isLoading)))},dependencies:[m.O5,s._Y,s.JL,s.F,m.Ov]})}return r})();function w(r,l){1&r&&e._UZ(0,"span",25)}function J(r,l){1&r&&(e.TgZ(0,"span",40),e._uU(1,"Activo"),e.qZA())}function x(r,l){1&r&&(e.TgZ(0,"span",41),e._uU(1,"Inactivo"),e.qZA())}function L(r,l){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td")(3,"div",26)(4,"div",27),e._UZ(5,"img",28),e.qZA(),e.TgZ(6,"div",29),e._uU(7),e.qZA()()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e.YNc(13,J,2,0,"span",30),e.YNc(14,x,2,0,"span",31),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td",32)(18,"a",33),e.NdJ("click",function(){const a=e.CHM(n).$implicit,i=e.oxw();return e.KtG(i.editEmpresa(a))}),e.TgZ(19,"i",34),e._UZ(20,"span",5)(21,"span",6),e.qZA()(),e.TgZ(22,"a",35),e.NdJ("click",function(){const a=e.CHM(n).$implicit,i=e.oxw();return e.KtG(i.deleteEmpresa(a))}),e.TgZ(23,"i",36),e._UZ(24,"span",5)(25,"span",6)(26,"span",37)(27,"span",38)(28,"span",39),e.qZA()()()(),e.BQk()}if(2&r){const n=l.$implicit;e.xp6(5),e.Q6J("src",n.imagen,e.LSH),e.xp6(2),e.Oqu(n.nombre_empresa),e.xp6(2),e.Oqu(n.ruc_empresa),e.xp6(2),e.Oqu(n.correo),e.xp6(2),e.Q6J("ngIf",1==n.estado),e.xp6(1),e.Q6J("ngIf",2==n.estado),e.xp6(2),e.Oqu(n.created_at)}}const N=[{path:"",component:E,children:[{path:"list",component:(()=>{class r{modalService;empresaService;search="";EMPRESAS=[];isLoading$;totalPages=0;currentPage=1;constructor(n,t){this.modalService=n,this.empresaService=t}ngOnInit(){this.isLoading$=this.empresaService.isLoading$,this.listEmpresas()}listEmpresas(n=1){this.empresaService.listEmpresas(n,this.search).subscribe(t=>{console.log(t),this.EMPRESAS=t.empresas,this.totalPages=t.total,this.currentPage=n})}loadPage(n){this.listEmpresas(n)}createEmpresa(){this.modalService.open(v,{centered:!0,size:"xl"}).componentInstance.EmpresaC.subscribe(t=>{this.EMPRESAS.unshift(t)})}editEmpresa(n){const t=this.modalService.open(y,{centered:!0,size:"xl"});t.componentInstance.EMPRESA_SELECTED=n,t.componentInstance.EmpresaE.subscribe(o=>{const a=this.EMPRESAS.findIndex(i=>i.id==n.id);-1!=a&&(this.EMPRESAS[a]=o)})}deleteEmpresa(n){const t=this.modalService.open(U,{centered:!0,size:"md"});t.componentInstance.EMPRESA_SELECTED=n,t.componentInstance.EmpresaD.subscribe(()=>{const o=this.EMPRESAS.findIndex(a=>a.id==n.id);-1!=o&&this.EMPRESAS.splice(o,1)})}enviarMensajeWhatsApp(){const t=prompt("Ingrese el mensaje a enviar");t&&this.empresaService.enviarMensajeWhatsApp({number:"5939982463178",message:t}).subscribe({next:a=>alert("\u2705 Mensaje enviado correctamente"),error:a=>alert("\u274c Error al enviar el mensaje")})}static \u0275fac=function(t){return new(t||r)(e.Y36(p.FF),e.Y36(c.P))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-list-empresa"]],decls:37,vars:10,consts:[[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","placeholder","Buscar Empresa",1,"form-control","form-control-solid","w-250px","ps-12",3,"ngModel","ngModelChange","keyup.enter"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"card-toolbar"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-success","me-2",3,"click"],[1,"bi","bi-whatsapp"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-body","pt-0"],[1,"table-responsive"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5","dataTable"],[1,"text-start","text-gray-500","fw-bold","fs-7","text-uppercase","gs-0"],[1,"min-w-150px"],[1,"min-w-125px"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"fw-semibold","text-gray-600"],[4,"ngFor","ngForOf"],[3,"collectionSize","page","pageSize","rotate","boundaryLinks","pageChange"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5"],["alt","Logo Empresa",3,"src"],[1,"fw-bold","text-dark"],["class","badge badge-light-success",4,"ngIf"],["class","badge badge-light-danger",4,"ngIf"],[1,"text-end"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],["href","#","onclick","return false;",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"badge","badge-light-success"],[1,"badge","badge-light-danger"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),e._UZ(5,"span",5)(6,"span",6),e.qZA(),e.TgZ(7,"input",7),e.NdJ("ngModelChange",function(i){return o.search=i})("keyup.enter",function(){return o.listEmpresas()}),e.qZA()()(),e.YNc(8,w,1,0,"span",8),e.ALo(9,"async"),e.TgZ(10,"div",9)(11,"div",10)(12,"button",11),e.NdJ("click",function(){return o.enviarMensajeWhatsApp()}),e._UZ(13,"i",12),e._uU(14," WhatsApp "),e.qZA(),e.TgZ(15,"button",13),e.NdJ("click",function(){return o.createEmpresa()}),e._uU(16,"+ Agregar Empresa"),e.qZA()()()(),e.TgZ(17,"div",14)(18,"div",15)(19,"table",16)(20,"thead")(21,"tr",17)(22,"th",18),e._uU(23,"Empresa"),e.qZA(),e.TgZ(24,"th",19),e._uU(25,"RUC"),e.qZA(),e.TgZ(26,"th",20),e._uU(27,"Correo"),e.qZA(),e.TgZ(28,"th",19),e._uU(29,"Estado"),e.qZA(),e.TgZ(30,"th",18),e._uU(31,"Fecha de Registro"),e.qZA(),e.TgZ(32,"th",21),e._uU(33,"Acciones"),e.qZA()()(),e.TgZ(34,"tbody",22),e.YNc(35,L,29,7,"ng-container",23),e.qZA()()(),e.TgZ(36,"ngb-pagination",24),e.NdJ("pageChange",function(i){return o.currentPage=i})("pageChange",function(i){return o.loadPage(i)}),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.search),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,8,o.isLoading$)),e.xp6(27),e.Q6J("ngForOf",o.EMPRESAS),e.xp6(1),e.Q6J("collectionSize",o.totalPages)("page",o.currentPage)("pageSize",25)("rotate",!0)("boundaryLinks",!0))},dependencies:[m.sg,m.O5,s.Fj,s.JJ,s.On,p.N9,m.Ov]})}return r})()}]}];let P=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[g.Bz.forChild(N),g.Bz]})}return r})();var R=d(9862),I=d(53);let k=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[m.ez,P,R.JF,s.u5,p.IJ,s.UX,I.vi,p.bz,p.jF]})}return r})()}}]);
"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[663],{7663:(j,Z,r)=>{r.r(Z),r.d(Z,{KardexModule:()=>I});var d=r(6814),g=r(7304),t=r(5879);let h=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=t.Xpm({type:e,selectors:[["app-kardex"]],decls:1,vars:0,template:function(i,o){1&i&&t._UZ(0,"router-outlet")},dependencies:[g.lC]})}return e})();var p=r(6988),u=r(9862),x=r(5619),m=r(4716),f=r(3595);let T=(()=>{class e{http;authservice;isLoading$;isLoadingSubject;constructor(n,i){this.http=n,this.authservice=i,this.isLoadingSubject=new x.X(!1),this.isLoading$=this.isLoadingSubject.asObservable()}listKardex(n){this.isLoadingSubject.next(!0);let i=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.post(p.$g+"/kardex/index",n,{headers:i}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}configAll(){this.isLoadingSubject.next(!0);let n=new u.WM({Authorization:"Bearer "+this.authservice.token});return this.http.get(p.$g+"/kardex/config",{headers:n}).pipe((0,m.x)(()=>this.isLoadingSubject.next(!1)))}static \u0275fac=function(i){return new(i||e)(t.LFG(u.eN),t.LFG(f.e8))};static \u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var A=r(2425),s=r(6223),l=r(1274);function q(e,a){1&e&&t._UZ(0,"span",42)}function U(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"option",43),t._uU(2),t.qZA(),t.BQk()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function v(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.ingreso.quantity),t.xp6(2),t.Oqu(n.ingreso.price_unit),t.xp6(2),t.Oqu(n.ingreso.total)}}function b(e,a){1&e&&(t.ynx(0),t._UZ(1,"td")(2,"td")(3,"td"),t.BQk())}function C(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.salida.quantity),t.xp6(2),t.Oqu(n.salida.price_unit),t.xp6(2),t.Oqu(n.salida.total)}}function y(e,a){1&e&&(t.ynx(0),t._UZ(1,"td")(2,"td")(3,"td"),t.BQk())}function K(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,v,7,3,"ng-container",52),t.YNc(6,b,4,0,"ng-container",52),t.YNc(7,C,7,3,"ng-container",52),t.YNc(8,y,4,0,"ng-container",52),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&e){const n=a.$implicit;t.xp6(2),t.Oqu(n.fecha),t.xp6(2),t.Oqu(n.detalle),t.xp6(1),t.Q6J("ngIf",n.ingreso),t.xp6(1),t.Q6J("ngIf",!n.ingreso),t.xp6(1),t.Q6J("ngIf",n.salida),t.xp6(1),t.Q6J("ngIf",!n.salida),t.xp6(2),t.Oqu(n.existencia.quantity),t.xp6(2),t.Oqu(n.existencia.price_unit),t.xp6(2),t.Oqu(n.existencia.total)}}function O(e,a){if(1&e&&(t.ynx(0),t.YNc(1,K,15,9,"tr",7),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n.movimients)}}function k(e,a){if(1&e&&(t.ynx(0),t.YNc(1,O,2,1,"ng-container",52),t.BQk()),2&e){const n=a.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.unit_id==i.unit_first.id)}}function L(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.ingreso.quantity),t.xp6(2),t.Oqu(n.ingreso.price_unit),t.xp6(2),t.Oqu(n.ingreso.total)}}function J(e,a){1&e&&(t.ynx(0),t._UZ(1,"td")(2,"td")(3,"td"),t.BQk())}function M(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.salida.quantity),t.xp6(2),t.Oqu(n.salida.price_unit),t.xp6(2),t.Oqu(n.salida.total)}}function w(e,a){1&e&&(t.ynx(0),t._UZ(1,"td")(2,"td")(3,"td"),t.BQk())}function Q(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,L,7,3,"ng-container",52),t.YNc(6,J,4,0,"ng-container",52),t.YNc(7,M,7,3,"ng-container",52),t.YNc(8,w,4,0,"ng-container",52),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&e){const n=a.$implicit;t.xp6(2),t.Oqu(n.fecha),t.xp6(2),t.Oqu(n.detalle),t.xp6(1),t.Q6J("ngIf",n.ingreso),t.xp6(1),t.Q6J("ngIf",!n.ingreso),t.xp6(1),t.Q6J("ngIf",n.salida),t.xp6(1),t.Q6J("ngIf",!n.salida),t.xp6(2),t.Oqu(n.existencia.quantity),t.xp6(2),t.Oqu(n.existencia.price_unit),t.xp6(2),t.Oqu(n.existencia.total)}}function N(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",53),t._UZ(2,"td",54),t.TgZ(3,"td",55)(4,"b"),t._uU(5),t.qZA()()(),t.TgZ(6,"tr",53)(7,"td")(8,"b"),t._uU(9,"Fecha"),t.qZA()(),t.TgZ(10,"td")(11,"b"),t._uU(12,"Detalle"),t.qZA()(),t.TgZ(13,"td")(14,"b"),t._uU(15,"Cantidad"),t.qZA()(),t.TgZ(16,"td")(17,"b"),t._uU(18,"V/Unitario"),t.qZA()(),t.TgZ(19,"td")(20,"b"),t._uU(21,"V/Total"),t.qZA()(),t.TgZ(22,"td")(23,"b"),t._uU(24,"Cantidad"),t.qZA()(),t.TgZ(25,"td")(26,"b"),t._uU(27,"V/Unitario"),t.qZA()(),t.TgZ(28,"td")(29,"b"),t._uU(30,"V/Total"),t.qZA()(),t.TgZ(31,"td")(32,"b"),t._uU(33,"Cantidad"),t.qZA()(),t.TgZ(34,"td")(35,"b"),t._uU(36,"V/Unitario"),t.qZA()(),t.TgZ(37,"td")(38,"b"),t._uU(39,"V/Total"),t.qZA()()(),t.YNc(40,Q,15,9,"tr",7),t.BQk()),2&e){const n=t.oxw().$implicit,i=t.oxw().$implicit,o=t.oxw();t.xp6(5),t.Oqu(o.getNameUnit(i,n.unit_id)),t.xp6(35),t.Q6J("ngForOf",n.movimients)}}function F(e,a){if(1&e&&(t.ynx(0),t.YNc(1,N,41,2,"ng-container",52),t.BQk()),2&e){const n=a.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.unit_id!=i.unit_first.id)}}function $(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"div",44)(2,"table",45)(3,"tr")(4,"b"),t._uU(5," PRODUCTO:"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"tr")(8,"b"),t._uU(9,"SKU:"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"tr")(12,"b"),t._uU(13,"Categoria:"),t.qZA(),t._uU(14),t.qZA()(),t.TgZ(15,"table")(16,"thead")(17,"tr"),t._UZ(18,"th",46),t.TgZ(19,"th",47),t._uU(20,"Entrada"),t.qZA(),t.TgZ(21,"th",48),t._uU(22,"Salida"),t.qZA(),t.TgZ(23,"th",49),t._uU(24,"Existencias"),t.qZA()(),t.TgZ(25,"tr")(26,"th",50),t._uU(27,"Fecha"),t.qZA(),t.TgZ(28,"th",50),t._uU(29,"Detalle"),t.qZA(),t.TgZ(30,"th",51),t._uU(31),t.qZA()(),t.TgZ(32,"tr")(33,"th"),t._uU(34,"Cantidad"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"V/Unitario"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"V/Total"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Cantidad"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"V/Unitario"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"V/Total"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Cantidad"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"V/Unitario"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"V/Total"),t.qZA()()(),t.TgZ(51,"tbody"),t.YNc(52,k,2,1,"ng-container",7),t.YNc(53,F,2,1,"ng-container",7),t.qZA()()(),t.BQk()),2&e){const n=a.$implicit;t.xp6(6),t.hij(" ",n.title,""),t.xp6(4),t.hij(" ",n.sku,""),t.xp6(4),t.hij(" ",n.categoria,""),t.xp6(17),t.Oqu(n.unit_first.name),t.xp6(21),t.Q6J("ngForOf",n.movimient_units),t.xp6(1),t.Q6J("ngForOf",n.movimient_units)}}const S=[{path:"",component:h,children:[{path:"reporte",component:(()=>{class e{kardexService;toast;isLoading$;categories=[];segment_clients=[];warehouses=[];year="";month="";year_current="";month_current="";warehouse_id="";search_product="";KARDEXS=[];constructor(n,i){this.kardexService=n,this.toast=i}ngOnInit(){this.isLoading$=this.kardexService.isLoading$,this.configAll()}configAll(){this.kardexService.configAll().subscribe(n=>{console.log(n),this.warehouses=n.warehouses,this.year=n.year,this.month=n.month,this.year_current=n.year,this.month_current=n.month})}listKardex(){this.warehouse_id?this.kardexService.listKardex({year:this.year,month:this.month,warehouse_id:this.warehouse_id,search_product:this.search_product}).subscribe(i=>{console.log(i),this.KARDEXS=i.kardex_products}):this.toast.error("Validaci\xf3n","Necesitas seleccionar un almacen")}reset(){this.year=this.year_current,this.month=this.month_current,this.search_product="",this.listKardex()}getNameUnit(n,i){let o=n.units.find(c=>c.id==i);return o?o.name:"---"}exportKardex(){if(!this.warehouse_id)return void this.toast.error("Validaci\xf3n","Necesitas seleccionar un almacen");let n="";this.year&&(n+="&year="+this.year),this.month&&(n+="&month="+this.month),this.warehouse_id&&(n+="&warehouse_id="+this.warehouse_id),this.search_product&&(n+="&search_product="+this.search_product),window.open(p.$g+"/excel/export-kardex?z=1"+n,"_blank")}static \u0275fac=function(i){return new(i||e)(t.Y36(T),t.Y36(A._W))};static \u0275cmp=t.Xpm({type:e,selectors:[["app-list-kardex"]],decls:81,vars:9,consts:[[1,"card"],[1,"card-body"],["class","spinner-border spinner-border-sm align-middle ms-2",4,"ngIf"],[1,"row","align-items-center","py-4"],[1,"col-3"],["name","warehouse_id","placeholder","Selec. Almacen",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[1,"text-muted","fs-7"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"ki-duotone","ki-magnifier","fs-3","position-absolute","ms-5"],[1,"path1"],[1,"path2"],["type","text","name","search","data-kt-customer-table-filter","search","placeholder","Producto",1,"form-control","form-control-solid","ps-12",3,"ngModel","ngModelChange","keyup.enter"],[1,"form-text","text-muted"],[1,"col-2"],["name","year","placeholder","Filtrar por A\xf1o",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","2023"],["value","2024"],["value","2025"],["value","2026"],["name","month","placeholder","Filtrar por Mes",1,"form-control","form-select-solid","fw-bolder",3,"ngModel","ngModelChange"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],[1,"col-2","d-flex"],[1,"btn","btn-primary","btn-sm","mx-1",3,"click"],[1,"ki-duotone","ki-magnifier","fs-2"],[1,"btn","btn-dark","btn-sm",3,"click"],[1,"ki-duotone","ki-loading","fs-2"],["placement","top-start","ngbTooltip","Exportar Kardex",1,"btn","btn-success","btn-sm","mx-1",3,"click"],[1,"ki-duotone","ki-folder-down","fs-2"],[1,"row"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"col-12","py-5"],[1,"py-2"],["rowspan","1","colspan","2"],["colspan","3",1,"entrada"],["colspan","3",1,"salida"],["colspan","3",1,"existencias"],["rowspan","2"],["colspan","9",1,"subheader"],[4,"ngIf"],[1,"new-row"],["colspan","2"],["colspan","9"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,q,1,0,"span",2),t.ALo(3,"async"),t.TgZ(4,"div",3)(5,"div",4)(6,"select",5),t.NdJ("ngModelChange",function(_){return o.warehouse_id=_}),t.TgZ(7,"option",6),t._uU(8,"Ninguno"),t.qZA(),t.YNc(9,U,3,2,"ng-container",7),t.qZA(),t.TgZ(10,"div",8),t._uU(11,"Almacen de atenci\xf3n."),t.qZA()(),t.TgZ(12,"div",4)(13,"div",9)(14,"i",10),t._UZ(15,"span",11)(16,"span",12),t.qZA(),t.TgZ(17,"input",13),t.NdJ("ngModelChange",function(_){return o.search_product=_})("keyup.enter",function(){return o.listKardex()}),t.qZA()(),t.TgZ(18,"small",14)(19,"b"),t._uU(20,"Filtrar"),t.qZA(),t._uU(21," por Nombre de Producto"),t.qZA()(),t.TgZ(22,"div",15)(23,"select",16),t.NdJ("ngModelChange",function(_){return o.year=_}),t.TgZ(24,"option",17),t._uU(25,"2023"),t.qZA(),t.TgZ(26,"option",18),t._uU(27,"2024"),t.qZA(),t.TgZ(28,"option",19),t._uU(29,"2025"),t.qZA(),t.TgZ(30,"option",20),t._uU(31,"2026"),t.qZA()(),t.TgZ(32,"small",14)(33,"b"),t._uU(34,"Filtrar"),t.qZA(),t._uU(35," por A\xf1o"),t.qZA()(),t.TgZ(36,"div",15)(37,"select",21),t.NdJ("ngModelChange",function(_){return o.month=_}),t.TgZ(38,"option",22),t._uU(39,"Enero"),t.qZA(),t.TgZ(40,"option",23),t._uU(41,"Febrero"),t.qZA(),t.TgZ(42,"option",24),t._uU(43,"Marzo"),t.qZA(),t.TgZ(44,"option",25),t._uU(45,"Abril"),t.qZA(),t.TgZ(46,"option",26),t._uU(47,"Mayo"),t.qZA(),t.TgZ(48,"option",27),t._uU(49,"Junio"),t.qZA(),t.TgZ(50,"option",28),t._uU(51,"Julio"),t.qZA(),t.TgZ(52,"option",29),t._uU(53,"Agosto"),t.qZA(),t.TgZ(54,"option",30),t._uU(55,"Septiembre"),t.qZA(),t.TgZ(56,"option",31),t._uU(57,"Octubre"),t.qZA(),t.TgZ(58,"option",32),t._uU(59,"Noviembre"),t.qZA(),t.TgZ(60,"option",33),t._uU(61,"Diciembre"),t.qZA()(),t.TgZ(62,"small",14)(63,"b"),t._uU(64,"Filtrar"),t.qZA(),t._uU(65," por Mes"),t.qZA()(),t.TgZ(66,"div",34)(67,"button",35),t.NdJ("click",function(){return o.listKardex()}),t.TgZ(68,"i",36),t._UZ(69,"span",11)(70,"span",12),t.qZA()(),t.TgZ(71,"button",37),t.NdJ("click",function(){return o.reset()}),t.TgZ(72,"i",38),t._UZ(73,"span",11)(74,"span",12),t.qZA()(),t.TgZ(75,"button",39),t.NdJ("click",function(){return o.exportKardex()}),t.TgZ(76,"i",40),t._UZ(77,"span",11)(78,"span",12),t.qZA()()()(),t.TgZ(79,"div",41),t.YNc(80,$,54,6,"ng-container",7),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,7,o.isLoading$)),t.xp6(4),t.Q6J("ngModel",o.warehouse_id),t.xp6(3),t.Q6J("ngForOf",o.warehouses),t.xp6(8),t.Q6J("ngModel",o.search_product),t.xp6(6),t.Q6J("ngModel",o.year),t.xp6(14),t.Q6J("ngModel",o.month),t.xp6(43),t.Q6J("ngForOf",o.KARDEXS))},dependencies:[d.sg,d.O5,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.On,l._L,d.Ov],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;text-align:center;padding:5px}th[_ngcontent-%COMP%], .new-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f2f2}.entrada[_ngcontent-%COMP%]{background-color:#d4edda}.salida[_ngcontent-%COMP%]{background-color:#f8d7da}.existencias[_ngcontent-%COMP%]{background-color:#fff3cd}"]})}return e})()}]}];let B=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]})}return e})();var Y=r(53);let I=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[d.ez,B,u.JF,s.u5,l.IJ,s.UX,Y.vi,l.bz,l.jF]})}return e})()}}]);
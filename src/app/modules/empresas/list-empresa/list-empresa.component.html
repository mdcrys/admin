<div class="card">
  <!--begin::Card header-->
  <div class="card-header border-0 pt-6">
    <!--begin::Card title-->
    <div class="card-title">
      <!--begin::Search-->
      <div class="d-flex align-items-center position-relative my-1">
        <i class="ki-duotone ki-magnifier fs-3 position-absolute ms-5">
          <span class="path1"></span><span class="path2"></span>
        </i>
        <input
          type="text"
          [(ngModel)]="search"
          (keyup.enter)="listEmpresas()"
          name="search"
          class="form-control form-control-solid w-250px ps-12"
          placeholder="Buscar Empresa"
        />
      </div>
      <!--end::Search-->
    </div>
    <span class="spinner-border spinner-border-sm align-middle ms-2" *ngIf="isLoading$ | async"></span>

    <!--begin::Card toolbar-->
    <div class="card-toolbar">
      <div class="d-flex justify-content-end">
         <button type="button" class="btn btn-success me-2" (click)="enviarMensajeWhatsApp()">
    <i class="bi bi-whatsapp"></i> WhatsApp
  </button>
        <button type="button" class="btn btn-primary" (click)="createEmpresa()">+ Agregar Empresa</button>
      </div>
    </div>
    <!--end::Card toolbar-->
  </div>
  <!--end::Card header-->

  <!--begin::Card body-->
  <div class="card-body pt-0">
    <!--begin::Table-->
    <div class="table-responsive">
      <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable">
        <thead>
          <tr class="text-start text-gray-500 fw-bold fs-7 text-uppercase gs-0">
            <th class="min-w-150px">Empresa</th>
            <th class="min-w-125px">RUC</th>
            <th class="min-w-200px">Correo</th>
            <th class="min-w-125px">Estado</th>
            <th class="min-w-150px">Fecha de Registro</th>
            <th class="text-end min-w-100px">Acciones</th>
          </tr>
        </thead>
        <tbody class="fw-semibold text-gray-600">
          <ng-container *ngFor="let EMPRESA of EMPRESAS">
            <tr>
              <td>
                <div class="d-flex align-items-center">
                  <div class="symbol symbol-50px me-5">
                    <img [src]="EMPRESA.imagen" alt="Logo Empresa" />
                  </div>
                  <div class="fw-bold text-dark">{{ EMPRESA.nombre_empresa }}</div>
                </div>
              </td>

              <td>{{ EMPRESA.ruc_empresa }}</td>
              <td>{{ EMPRESA.correo }}</td>

              <td>
                <span class="badge badge-light-success" *ngIf="EMPRESA.estado == 1">Activo</span>
                <span class="badge badge-light-danger" *ngIf="EMPRESA.estado == 2">Inactivo</span>
              </td>

              <td>{{ EMPRESA.created_at }}</td>

              <td class="text-end">
                <a
                  href="#"
                  onclick="return false;"
                  (click)="editEmpresa(EMPRESA)"
                  class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"
                >
                  <i class="ki-duotone ki-pencil fs-2">
                    <span class="path1"></span><span class="path2"></span>
                  </i>
                </a>

                <a
                  href="#"
                  onclick="return false;"
                  (click)="deleteEmpresa(EMPRESA)"
                  class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm"
                >
                  <i class="ki-duotone ki-trash fs-2">
                    <span class="path1"></span><span class="path2"></span>
                    <span class="path3"></span><span class="path4"></span><span class="path5"></span>
                  </i>
                </a>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>

    <ngb-pagination
      [collectionSize]="totalPages"
      [(page)]="currentPage"
      [pageSize]="25"
      [rotate]="true"
      [boundaryLinks]="true"
      (pageChange)="loadPage($event)"
    ></ngb-pagination>
    <!--end::Table-->
  </div>
  <!--end::Card body-->
</div>
